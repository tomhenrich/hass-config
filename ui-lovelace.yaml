button_card_templates:
  cf_sensor:
    layout: icon_name_state2nd
    size: 65%
    styles:
      grid:
        - grid-template-columns: 3em 1fr
      card:
        - border: 4px solid transparent
        - border-width: 0 0 0 4px
        - padding: 8px 0
        - background-color: var(--label-badge-background-color)
        - height: 100%
      icon:
        - color: var(--secondary-text-color)
      name:
        - font-size: medium
        - font-weight: var(--mcg-title-font-weight, 500)
        - text-align: left
        - line-height: 1.2
        - width: 100%
        - color: var(--secondary-text-color)
        - align-self: center
      state:
        - font-size: smaller
        - text-align: left
        - color: var(--light-primary-color)
        - width: 100%
        - align-self: center
        - text-transform: capitalize
      label:
        - font-size: smaller
        - text-align: left
        - color: var(--light-primary-color)
        - width: 100%
        - align-self: center
    tap_action:
      action: none
    hold_action:
      action: more-info
    style: 'ha-card {height: 100%;} .uom {font-size: small !important;}'
  cf_sensor_compact:
    styles:
      card:
        - padding: 6px 0
  cf_sensor_small:
    size: 55%
    styles:
      grid:
        - grid-template-columns: 2.5em 1fr
      name:
        - font-size: smaller
      state:
        - font-size: small
      label:
        - font-size: small
      custom_fields:
        i:
          - width: 55%
          - display: flex
          - place-self: center
    style: '.uom {font-size: small !important;}'
  cf_sensor_smallicon:
    show_icon: true
    size: 55%
    styles:
      grid:
        - grid-template-columns: 2.5em 1fr
    style: '.uom {font-size: small !important;}'
  cf_sensor_noicon:
    show_icon: false
    styles:
      grid:
        - grid-template-columns: 8px 1fr
    style: '.uom {font-size: small !important;}'
  cf_sensor_largevalue:
    styles:
      state:
        - font-size: large
      label:
        - font-size: large
    style: '.uom {font-size: small !important;}'
  cf_pushbutton:
    state:
      - value: 'off'
        id: pushbutton_off
        styles:
          card:
            - background-color: var(--divider-color)
      - value: 'on'
        id: pushbutton_on
        styles:
          card:
            - background-color: var(--accent-color)
  cf_lights_main:
    style: 'ha-card { height: 100%; }'
    show_state: false
    size: 40%
    tap_action:
      action: toggle
    hold_action:
      action: more-info
    state:
      - value: 'on'
        id: cf_lights_on
        styles:
          card:
            - background-color: var(--accent-color)
          icon:
            - color: var(--primary-text-color)
      - value: 'off'
        id: cf_lights_off
        styles:
          card:
            - background-color: var(--divider-color)
          icon:
            - opacity: 0.5
    styles:
      name:
        - font-size: small
      icon:
        - margin-bottom: 10px
  cf_lights:
    template: cf_lights_main
    state:
      - value: 'on'
        id: cf_lights_on
        icon: mdi:google-circles-communities
      - value: 'off'
        id: cf_lights_off
        icon: mdi:google-circles-communities
  cf_lights_onoff:
    template: cf_lights_main
    hold_action:
      action: none
    state:
      - value: 'on'
        id: cf_lights_on
        icon: mdi:circle
      - value: 'off'
        id: cf_lights_off
        icon: mdi:circle-outline
views:
  - icon: hass:home
    path: fire7
    theme: Dawson - Dark
    visible:
      - user: 1adcbfbd5637444bacb8239bc794bb4a
      - user: 25121d6fff8247f5b3c8b55198ff4705
    type: custom:grid-layout
    badges: []
    cards:
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: 35% 65%
          grid-template-rows: auto
          mediaquery:
            '(max-width: 600px)':
              grid-template-columns: 100%
        cards:
          - type: custom:layout-card
            layout_type: custom:grid-layout
            layout:
              grid-template-columns: repeat(4, 25%)
              grid-template-rows: auto
            view_layout:
              grid-column: 1
            cards:
              - type: markdown
                content: >-
                  {{ "<div><strong>" + now().strftime("%-I:%M") +
                  now().strftime("%p").lower() + "</strong></div><div>" +
                  now().strftime("%A, %-m/%-d") + "</div>"}}
                view_layout:
                  grid-column: span 4
                style: >-
                  ha-card {background-color: transparent; display: flex;}
                  ha-markdown {padding-left: 8px !important; font-size: large;
                  align-self: center;} ha-markdown strong {font-size: xx-large
                  !important;}
              - type: custom:button-card
                name: Inside
                template:
                  - cf_sensor
                  - cf_sensor_largevalue
                  - cf_sensor_noicon
                view_layout:
                  grid-column: span 2
                entity: sensor.ecobee3_temperature
                show_state: false
                show_label: true
                label: >-
                  [[[ return Math.round(Number(entity.state)) + "<span
                  class='uom'>" + entity.attributes.unit_of_measurement +
                  "</span>"]]]
              - type: custom:button-card
                view_layout:
                  grid-column: span 2
                entity: climate.ecobee3
                template:
                  - cf_sensor
                  - cf_sensor_largevalue
                  - cf_pushbutton
                show_state: true
                name: Furnace
                state:
                  - value: heat
                    id: pushbutton_on
                    icon: mdi:fire
                  - value: 'off'
                    id: pushbutton_off
                    icon: mdi:fire-off
                tap_action:
                  action: more-info
                hold_action:
                  action: none
              - type: custom:button-card
                name: Outside
                template:
                  - cf_sensor
                  - cf_sensor_largevalue
                  - cf_sensor_compact
                  - cf_sensor_noicon
                view_layout:
                  grid-column: span 2
                entity: sensor.owm_current_temp
                show_state: false
                show_label: true
                label: >-
                  [[[ return Math.round(Number(entity.state)) + "<span
                  class='uom'>Â°F</span>"]]]
              - type: custom:button-card
                name: Humidity
                template:
                  - cf_sensor
                  - cf_sensor_largevalue
                  - cf_sensor_compact
                  - cf_sensor_noicon
                view_layout:
                  grid-column: span 2
                entity: sensor.owm_current_humidity
                show_state: false
                show_label: true
                label: '[[[ return entity.state + "<span class=''uom''>%</span>"]]]'
              - type: custom:button-card
                name: Currently
                template:
                  - cf_sensor
                  - cf_sensor_compact
                  - cf_sensor_noicon
                view_layout:
                  grid-column: span 4
                entity: sensor.owm_current_condition
                show_state: false
                show_label: true
                label: '[[[ return entity.state ]]]'
              - type: custom:button-card
                name: Air Quality
                template:
                  - cf_sensor
                view_layout:
                  grid-column: span 4
                show_state: false
                show_label: true
                entity: sensor.airquality
                label: |
                  [[[
                    return entity.state + " <span class='badge'>" + entity.attributes.AQI + "</span>";
                  ]]]
                style: |
                  .badge {
                    background: var(--secondary-text-color);
                    color: var(--label-badge-background-color);
                    padding: 2px 4px;
                    border-radius: 7px;
                    font-size: x-small;
                    margin-left: 1em;
                    line-height: 1;
                    display: inline-block;
                  }
                  #label {
                    display: flex;
                  }
                state:
                  - value: Good
                    styles:
                      card:
                        - border-left-color: var(--label-badge-green)
                      icon:
                        - color: var(--label-badge-green)
                    icon: mdi:emoticon-happy-outline
                  - value: Moderate
                    styles:
                      card:
                        - border-left-color: rgb(253,214,75)
                      icon:
                        - color: '#fdd64b'
                    icon: mdi:emoticon-neutral-outline
                  - value: Unhealthy
                    styles:
                      card:
                        - border-left-color: rgb(235,12,39)
                      icon:
                        - color: '#eb0c27'
                    icon: mdi:emoticon-frown-outline
                  - value: Very Unhealthy
                    styles:
                      card:
                        - background-color: '#8f3f97'
                      name:
                        - color: '#fff'
                      label:
                        - color: '#fff'
                    icon: mdi:emoticon-frown
                  - value: Hazardous
                    styles:
                      card:
                        - background: var(--label-badge-red)
                      name:
                        - color: '#fff'
                      label:
                        - color: '#fff'
                    icon: mdi:emoticon-dead
              - type: custom:button-card
                entity: binary_sensor.trashday
                view_layout:
                  grid-column: span 4
                template:
                  - cf_sensor
                name: '[[[ return entity.attributes.type ]]]'
                label: '[[[ return entity.attributes.date ]]]'
                show_state: false
                show_label: true
                tap_action:
                  action: none
                styles:
                  icon:
                    - color: var(--primary-color)
                state:
                  - value: 'on'
                    styles:
                      icon:
                        - color: var(--accent-color)
                      card:
                        - border-color: var(--accent-color)
                  - operator: template
                    value: |
                      [[[
                        return entity.attributes.prox == 1
                      ]]]
                    styles:
                      icon:
                        - color: var(--light-primary-color)
                      card:
                        - border-color: var(--light-primary-color)
              - type: custom:button-card
                entity: binary_sensor.chest_freezer
                name: Chest Freezer
                view_layout:
                  grid-column: span 2
                template:
                  - cf_sensor
                  - cf_sensor_compact
                  - cf_sensor_noicon
                tap_action:
                  action: none
                show_state: true
                state:
                  - value: 'on'
                    icon: mdi:alert-circle
                    styles:
                      card:
                        - background-color: var(--accent-color)
                      name:
                        - color: var(--light-primary-color)
                      state:
                        - color: var(--light-primary-color)
                  - value: 'off'
                    styles:
                      icon:
                        - color: var(--primary-color)
              - type: custom:button-card
                entity: binary_sensor.laundry_washer
                view_layout:
                  grid-column: span 2
                template:
                  - cf_sensor
                  - cf_sensor_compact
                show_state: false
                show_label: true
                name: Washer
                tap_action:
                  action: none
                state:
                  - value: 'on'
                    label: Running
                    styles:
                      card:
                        - border-color: var(--accent-color)
                      icon:
                        - color: var(--accent-color)
                  - value: 'off'
                    label: Inactive
          - type: vertical-stack
            cards:
              - type: markdown
                content: '##### Lights'
                style: >-
                  ha-card {background-color: transparent;} ha-markdown {padding:
                  0 !important;}
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: repeat(10, 10%)
                  grid-template-rows: auto
                view_layout:
                  grid-column: 2
                cards:
                  - type: custom:button-card
                    entity: group.den_lights
                    template:
                      - cf_lights
                    view_layout:
                      grid-column: span 2
                  - type: custom:button-card
                    entity: light.den_light_1
                    template:
                      - cf_lights
                    name: Den 1
                  - type: custom:button-card
                    entity: light.den_light_2
                    template:
                      - cf_lights
                    name: Den 2
                  - type: custom:button-card
                    entity: switch.bar_light
                    name: Bar
                    template:
                      - cf_lights_onoff
                    view_layout:
                      grid-column: span 2
                  - type: custom:button-card
                    entity: light.living_room_light
                    name: Living Room
                    template:
                      - cf_lights
                    view_layout:
                      grid-column: span 2
                  - type: custom:button-card
                    entity: light.dining_room_light
                    name: Dining Room
                    template:
                      - cf_lights
                    view_layout:
                      grid-column: span 2
                  - type: custom:button-card
                    entity: switch.entryway_light
                    name: Entryway
                    template:
                      - cf_lights_onoff
                    view_layout:
                      grid-column: span 2
                  - type: custom:button-card
                    entity: switch.porch_light
                    name: Porch
                    template:
                      - cf_lights_onoff
                    view_layout:
                      grid-column: span 2
                  - type: custom:button-card
                    entity: switch.deck_switch
                    name: Deck
                    template:
                      - cf_lights_onoff
                    view_layout:
                      grid-column: span 2
              - type: markdown
                content: '##### Garage'
                style: >-
                  ha-card {background-color: transparent;} ha-markdown {padding:
                  0 !important;}
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: repeat(10, 10%)
                  grid-template-rows: auto
                cards:
                  - type: custom:button-card
                    entity: binary_sensor.garage_door_sensor
                    name: Garage
                    view_layout:
                      grid-column: span 6
                    template:
                      - cf_sensor
                      - cf_sensor_largevalue
                      - cf_pushbutton
                    show_state: true
                    tap_action:
                      action: call-service
                      service: cover.toggle
                      service_data:
                        entity_id: cover.garage_door
                    style: |
                      ha-card {height: auto !important;}
                    state:
                      - value: 'on'
                        id: pushbutton_open
                        icon: mdi:garage-open
                      - value: 'off'
                        id: pushbutton_closed
                        icon: mdi:garage
                  - type: custom:button-card
                    entity: input_boolean.fire_tv_reboot
                    name: Fire TV
                    label: Reboot
                    template:
                      - cf_sensor
                      - cf_pushbutton
                      - cf_sensor_smallicon
                    view_layout:
                      grid-column: 9 / span 2
                    show_state: false
                    show_label: true
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/tv
              - type: markdown
                content: '##### Network'
                style: >-
                  ha-card {background-color: transparent;} ha-markdown {padding:
                  0 !important;}
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: 25% 35% 20% 20%
                  grid-template-rows: auto
                cards:
                  - type: custom:button-card
                    entity: switch.adguard_protection
                    name: AdBlock
                    template:
                      - cf_sensor
                      - cf_sensor_compact
                      - cf_sensor_small
                    view_layout:
                      grid-column: span 1
                    show_state: true
                    tap_action:
                      action: toggle
                    state:
                      - value: 'on'
                        icon: mdi:shield-check
                        styles:
                          card:
                            - border-left-color: var(--label-badge-green)
                            - background-color: var(--label-badge-background-color)
                      - value: 'off'
                        icon: mdi:shield-off-outline
                        styles:
                          card:
                            - border-left-color: var(--label-badge-red)
                            - background-color: var(--label-badge-background-color)
                          icon:
                            - color: var(--label-badge-red)
                  - type: custom:button-card
                    entity: sensor.monthly_data_cap
                    name: Comcast Data Usage
                    view_layout:
                      grid-column: span 1
                    template:
                      - cf_sensor
                      - cf_sensor_compact
                      - cf_sensor_small
                      - cf_sensor_noicon
                    show_state: false
                    show_label: true
                    label: |
                      [[[
                        return states['sensor.monthly_data_usage'].state + 
                        '<span class="uom"> ' + states['sensor.monthly_data_usage'].attributes.unit_of_measurement + "</span> (" +
                        entity.state + '<span class="uom">' + entity.attributes.unit_of_measurement + '</span>)'
                      ]]]
                    icon: mdi:swap-vertical-bold
                    tap_action:
                      action: more-info
                      entity: sensor.monthly_data_usage
                    state:
                      - operator: template
                        value: |
                          [[[
                            return entity.state > 75
                          ]]]
                        styles:
                          card:
                            - border-left-color: var(--label-badge-yellow)
                          icon:
                            - color: var(--label-badge-yellow)
                  - type: custom:button-card
                    entity: sensor.speedtest_download
                    name: Download
                    icon: mdi:cloud-download
                    view_layout:
                      grid-column: span 1
                    template:
                      - cf_sensor
                      - cf_sensor_compact
                      - cf_sensor_small
                      - cf_sensor_noicon
                    show_state: false
                    show_label: true
                    label: >-
                      [[[ return Math.round(Number(entity.state)) + " <span
                      class='uom'>Mb/s</span>"]]]
                  - type: custom:button-card
                    entity: sensor.speedtest_upload
                    name: Upload
                    icon: mdi:cloud-upload
                    view_layout:
                      grid-column: span 1
                    template:
                      - cf_sensor
                      - cf_sensor_compact
                      - cf_sensor_small
                      - cf_sensor_noicon
                    show_label: true
                    label: >-
                      [[[ return Math.round(Number(entity.state)) + " <span
                      class='uom'>Mb/s</span>"]]]
  - path: shutdown
    title: ''
    icon: hass:power
    theme: Dawson - Dark
    visible:
      - user: 1adcbfbd5637444bacb8239bc794bb4a
    type: panel
    badges: []
    cards:
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: 35% 65%
          grid-template-rows: auto
          mediaquery:
            '(max-width: 600px)':
              grid-template-columns: 100%
        cards:
          - type: custom:button-card
            entity: input_boolean.shutdown_primer
            name: Shut Down Home Assistant
            template:
              - cf_sensor
            tap_action:
              action: toggle
            show_state: false
            show_label: true
            label: >-
              [[[ if(entity.state == "off") return "Shut down Home Assistant";
              else return "Cancel"; ]]]
            state:
              - value: 'on'
                icon: mdi:alert-circle
                styles:
                  card:
                    - background-color: var(--label-badge-red)
                  name:
                    - color: var(--primary-color)
                  state:
                    - color: var(--primary-color)
                  icon:
                    - color: var(--primary-color)
              - value: 'off'
                styles:
                  icon:
                    - color: var(--primary-color)
          - type: conditional
            conditions:
              - entity: input_boolean.shutdown_primer
                state: 'on'
            card:
              type: custom:button-card
              entity: input_boolean.shutdown_confirm
              name: Confirm Shutdown
              template:
                - cf_sensor
              show_state: false
              show_label: true
              label: >-
                You will need to physically reconnect the Pi to power to
                restart.
  - path: batteries
    icon: hass:battery-charging-70
    theme: Campfire - Dark
    visible:
      - user: 1adcbfbd5637444bacb8239bc794bb4a
    type: custom:horizontal-layout
    badges: []
    cards:
      - type: custom:auto-entities
        card:
          type: entities
          title: Low Batteries
          show_header_toggle: false
        filter:
          include:
            - entity_id: sensor.*battery*
          exclude:
            - entity_id: '*iphone*'
            - entity_id: sensor.space_between*
            - entity_id: sensor.abhorred*
            - entity_id: sensor.neatfreak*
            - state: unavailable
            - state: '> 70'
        show_empty: false
      - type: custom:auto-entities
        card:
          type: entities
          title: Unavailable Sensors
        filter:
          include:
            - state: unavailable
          exclude:
            - entity_id: camera.*
            - entity_id: vacuum.*
            - entity_id: '*speedtest*'
            - entity_id: '*plex*'
            - domain: media_player
        show_empty: false
  - title: Lights
    path: lights
    type: sidebar
    theme: Dawson - Dark
    badges: []
    cards:
      - type: entities
        entities:
          - entity: input_boolean.timer_porch
            name: Porch Light
        title: Timers
        show_header_toggle: false
        state_color: true
        view_layout:
          position: sidebar
      - type: vertical-stack
        cards:
          - type: custom:light-entity-card
            header: Den Light 1
            entity: light.den_light_1
            shorten_cards: true
            consolidate_entities: false
            hide_header: false
            brightness: true
            show_slider_percent: true
            full_width_sliders: true
            brightness_icon: weather-sunny
          - type: custom:light-entity-card
            header: Den Light 2
            entity: light.den_light_2
            shorten_cards: true
            consolidate_entities: false
            hide_header: false
            brightness: true
            show_slider_percent: true
            full_width_sliders: true
            brightness_icon: weather-sunny
          - type: custom:light-entity-card
            header: Bar Light
            entity: switch.bar_light
            shorten_cards: true
            consolidate_entities: false
            child_card: false
            hide_header: false
            brightness: false
          - type: custom:light-entity-card
            header: Living Room Light
            entity: light.living_room_light
            shorten_cards: true
            consolidate_entities: false
            child_card: false
            hide_header: false
            brightness: true
            show_slider_percent: true
            full_width_sliders: true
            brightness_icon: weather-sunny
          - type: custom:light-entity-card
            header: Dining Room Light
            entity: light.dining_room_light
            shorten_cards: true
            consolidate_entities: false
            child_card: false
            hide_header: false
            brightness: true
            show_slider_percent: true
            full_width_sliders: true
            brightness_icon: weather-sunny
          - type: custom:light-entity-card
            header: Entryway Light
            entity: switch.entryway_light
            shorten_cards: true
            consolidate_entities: false
            child_card: false
            hide_header: false
            brightness: false
          - type: custom:light-entity-card
            header: Porch Light
            entity: switch.porch_light
            shorten_cards: true
            consolidate_entities: false
            child_card: false
            hide_header: false
            brightness: false
          - type: custom:light-entity-card
            header: Deck Light
            entity: switch.deck_switch
            shorten_cards: true
            consolidate_entities: false
            child_card: false
            hide_header: false
            brightness: false
  - icon: ''
    type: sidebar
    path: tv
    theme: Campfire - Dark
    title: TV
    badges: []
    cards:
      - type: entities
        entities:
          - entity: sensor.plex_movies
            name: Movies
          - entity: sensor.plex_shows
            name: TV Shows
        title: Plex Library
        show_header_toggle: false
        view_layout:
          position: main
      - type: button
        tap_action:
          action: toggle
        entity: input_boolean.fire_tv_reboot
        name: Reboot Fire TV
        icon: mdi:restart-alert
        show_icon: true
        show_state: false
        icon_height: 50px
        hold_action:
          action: none
        view_layout:
          position: sidebar
