views:
  - theme: Fluent Orange
    title: Home
    path: home
    visible:
      - user: 1adcbfbd5637444bacb8239bc794bb4a
      - user: 25121d6fff8247f5b3c8b55198ff4705
      - user: 03dd7450aa7f4d0e8df8ed730df485b1
    layout:
      grid-template-columns: 100%
      grid-template-rows: auto
      grid-gap: 0
      mediaquery:
        '(min-width: 800px)':
          grid-template-columns: 30% 70%
          grid-template-rows: auto
          grid-gap: 10px
    type: panel
    icon: mdi:home-circle-outline
    cards:
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: 35% auto
          grid-template-rows: auto
          grid-template-areas: |
            "sidebar main"
          grid-gap: 0
          mediaquery:
            '(max-width: 800px)':
              grid-template-columns: 100%
              grid-template-areas: |
                "sidebar"
                "main"
        cards:
          - type: vertical-stack
            cards:
              - type: conditional
                conditions:
                  - condition: screen
                    media_query: '(min-width: 768px)'
                card:
                  type: custom:mushroom-template-card
                  entity: sensor.date
                  primary: >-
                    {{ now().strftime("%-I:%M") + now().strftime("%p").lower()
                    }}
                  secondary: '{{ now().strftime("%A") }}, {{ now().strftime("%B %-d") }}'
                  tap_action:
                    action: none
                  fill_container: true
                  card_mod:
                    style: |
                      ha-card {
                        --card-primary-font-size: 4rem;
                        --card-secondary-font-size: 1.5rem;
                        --card-primary-line-height: 1.25;
                        --card-secondary-line-height: 1.5;
                        --ha-card-background: transparent;
                        padding-bottom: 0 !important;
                      }
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: repeat(2,min-content)
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.ecobee3_temperature
                    primary: Inside
                    secondary: '{{ states(config.entity)|int }}°'
                    icon: mdi:home-thermometer
                    icon_color: |
                      {{ "red" if states("climate.ecobee3") == "heat" }}
                    badge_icon: >-
                      {{ 'mdi:fan' if is_state("binary_sensor.furnace_running",
                      "on") }}
                    badge_color: red
                    tap_action:
                      action: navigate
                      navigation_path: '#climate'
                    hold_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          --card-secondary-font-size: 1.5rem;
                          --card-secondary-font-weight: bold;
                          --card-secondary-line-height: 1;
                          border-radius: 15px;
                        }
                        @media (min-width: 800px) {
                          ha-card {
                          --card-secondary-font-size: 3rem;
                          }
                        }
                        {% if states("binary_sensor.furnace_running") == "on" %}
                        mushroom-badge-icon {
                          animation: spin 2s linear infinite;
                        }
                        @keyframes spin {
                          from {transform:rotate(0deg);}
                          to {transform:rotate(360deg);}
                        }
                        {% endif %}
                  - type: custom:mushroom-template-card
                    entity: weather.ecobee3
                    primary: Outside
                    secondary: '{{ state_attr(config.entity, "temperature")|int }}°'
                    icon: ''
                    tap_action:
                      action: navigate
                      navigation_path: weather
                    card_mod:
                      style: |
                        ha-card {
                          --card-secondary-font-size: 1.5rem;
                          --card-secondary-font-weight: bold;
                          --ha-card-background: transparent;
                          --card-secondary-line-height: 1;
                        }
                        @media (min-width: 800px) {
                          ha-card {
                          --card-secondary-font-size: 3rem;
                          }
                        }
              - type: custom:mushroom-chips-card
                chips:
                  - type: template
                    entity: sensor.weather_forecast_daily
                    content: >-
                      Today: {{
                      state_attr(config.entity,"forecast")[0].temperature }}°/{{
                      state_attr(config.entity,"forecast")[0].templow }}°
                    icon: mdi:swap-vertical-bold
                    tap_action:
                      action: none
                  - type: template
                    entity: sensor.weather_forecast_daily
                    content: >-
                      Tomorrow: {{
                      state_attr(config.entity,"forecast")[1].temperature }}°/{{
                      state_attr(config.entity,"forecast")[1].templow }}°
                    tap_action:
                      action: none
                card_mod:
                  style: |
                    ha-card {
                      --chip-box-shadow: none;
                      --chip-background: none;
                    }
              - type: custom:mushroom-chips-card
                card_mod:
                  style: |
                    ha-card .chip-container {
                      gap: 0 !important;
                    }
                chips:
                  - type: template
                    entity: sensor.air_quality
                    content: 'Air Quality: {{ state_attr(config.entity, ''condition'') }} '
                    card_mod:
                      style: |
                        ha-card {
                          --chip-background: none;
                        }
                    tap_action:
                      action: none
                    icon: >-
                      {{ state_attr(config.entity,'icon') if
                      states(config.entity)|int == 0 else '' }}
                  - type: template
                    entity: sensor.air_quality
                    icon: >-
                      {{ iif(states(config.entity)|int==1,
                      state_attr(config.entity, 'icon'), 'mdi:circle-medium') }}
                    icon_color: >-
                      {{ state_attr('input_select.severity_scale', 'options')[1]
                      }}
                    card_mod:
                      style: |
                        {% if states(config.entity)|int != 1 %}
                        ha-card {
                          --chip-background: none;
                        }
                        {% endif %}
                    tap_action:
                      action: none
                  - type: template
                    entity: sensor.air_quality
                    icon: >-
                      {{ iif(states(config.entity)|int==2,
                      state_attr(config.entity, 'icon'), 'mdi:circle-medium') }}
                    icon_color: >-
                      {{ state_attr('input_select.severity_scale', 'options')[2]
                      }}
                    card_mod:
                      style: |
                        {% if states(config.entity)|int != 2 %}
                        ha-card {
                          --chip-background: none;
                        }
                        {% endif %}
                    tap_action:
                      action: none
                  - type: template
                    entity: sensor.air_quality
                    icon: >-
                      {{ iif(states(config.entity)|int==3,
                      state_attr(config.entity, 'icon'), 'mdi:circle-medium') }}
                    icon_color: >-
                      {{ state_attr('input_select.severity_scale', 'options')[3]
                      }}
                    card_mod:
                      style: |
                        {% if states(config.entity)|int != 3 %}
                        ha-card {
                          --chip-background: none;
                        }
                        {% endif %}
                    tap_action:
                      action: none
                  - type: template
                    entity: sensor.air_quality
                    icon: >-
                      {{ iif(states(config.entity)|int==4,
                      state_attr(config.entity, 'icon'), 'mdi:circle-medium') }}
                    icon_color: >-
                      {{ state_attr('input_select.severity_scale', 'options')[4]
                      }}
                    card_mod:
                      style: |
                        {% if states(config.entity)|int != 4 %}
                        ha-card {
                          --chip-background: none;
                        }
                        {% endif %}
                    tap_action:
                      action: none
                  - type: template
                    entity: sensor.air_quality
                    icon: >-
                      {{ iif(states(config.entity)|int==5,
                      state_attr(config.entity, 'icon'), 'mdi:circle-medium') }}
                    icon_color: >-
                      {{ state_attr('input_select.severity_scale', 'options')[5]
                      }}
                    card_mod:
                      style: |
                        {% if states(config.entity)|int != 5 %}
                        ha-card {
                          --chip-background: none;
                        }
                        {% endif %}
                    tap_action:
                      action: none
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: repeat(2, min-content)
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.next_trash_pickup
                    primary: Trash
                    secondary: '{{ states(config.entity) }}'
                    icon: '{{ state_attr(config.entity, "icon") }}'
                    icon_color: >
                      {% set prox = states(config.entity) %} {% if(prox ==
                      "Today") %}
                        var(--rgb-primary-color)
                      {% elif(prox == "Tomorrow") %}
                        white
                      {% endif %}
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/trash-schedule
                    double_tap_action:
                      action: none
                    hold_action:
                      action: none
                    badge_icon: >-
                      {% set prox = states(config.entity) %} {% if(prox ==
                      "Tomorrow") %}
                        mdi:calendar-arrow-right
                      {% endif %}
                    badge_color: >-
                      {% set prox = states(config.entity) %} {% if(prox ==
                      "Tomorrow") %}
                        var(--rgb-primary-color)
                      {% endif %}
                    card_mod:
                      style: |
                        ha-card {
                          --ha-card-background: transparent;
                          padding-right: 0 !important;
                        }
                  - type: custom:mushroom-template-card
                    entity: sensor.next_recycling_pickup
                    primary: Recycling
                    secondary: '{{ states(config.entity) }}'
                    icon: '{{ state_attr(config.entity, "icon") }}'
                    icon_color: >
                      {% set prox = states(config.entity) %} {% if(prox ==
                      "Today") %}
                        var(--rgb-primary-color)
                      {% elif(prox == "Tomorrow") %}
                        white
                      {% endif %}
                    tap_action:
                      action: none
                    double_tap_action:
                      action: navigate
                      navigation_path: /lovelace/trash-schedule
                    badge_icon: >-
                      {% set prox = states(config.entity) %} {% if(prox ==
                      "Tomorrow") %}
                        mdi:calendar-arrow-right
                      {% endif %}
                    badge_color: >-
                      {% set prox = states(config.entity) %} {% if(prox ==
                      "Tomorrow") %}
                        var(--rgb-primary-color)
                      {% endif %}
                    card_mod:
                      style: |
                        ha-card {
                          --ha-card-background: transparent;
                          padding-right: 0 !important;
                        }
              - type: conditional
                conditions:
                  - condition: state
                    entity: binary_sensor.arc_tags
                    state: 'on'
                card:
                  type: custom:mushroom-chips-card
                  chips:
                    - type: template
                      tap_action:
                        action: none
                      hold_action:
                        action: none
                      double_tap_action:
                        action: none
                      entity: sensor.arc_tags
                      icon: mdi:tag
                      icon_color: |
                        {% set color = "color_" + states(config.entity)|lower %}
                        {{ state_attr('binary_sensor.arc_tags', color) }}
                      content: Arc Tags
                      card_mod:
                        style: |
                          ha-card {
                            --chip-background: none;
                          }
                    - type: template
                      tap_action:
                        action: none
                      hold_action:
                        action: none
                      double_tap_action:
                        action: none
                      entity: sensor.arc_tags
                      icon: '{{ state_attr(''binary_sensor.arc_tags'', ''icon'') }}'
                      icon_color: >-
                        {% set color = 'color_' + state_attr(config.entity,
                        'saturday')[0]|lower %} {{
                        state_attr('binary_sensor.arc_tags', color) }}
                      card_mod:
                        style: |
                          ha-card {
                            --chip-background: none;
                          }
                    - type: template
                      tap_action:
                        action: none
                      hold_action:
                        action: none
                      double_tap_action:
                        action: none
                      entity: sensor.arc_tags
                      icon: '{{ state_attr(''binary_sensor.arc_tags'', ''icon'') }}'
                      icon_color: >-
                        {% set color = 'color_' + state_attr(config.entity,
                        'saturday')[1]|lower %} {{
                        state_attr('binary_sensor.arc_tags', color) }}
                      card_mod:
                        style: |
                          ha-card {
                            --chip-background: none;
                          }
                    - type: template
                      tap_action:
                        action: none
                      hold_action:
                        action: none
                      double_tap_action:
                        action: none
                      entity: sensor.arc_tags
                      icon: '{{ state_attr(''binary_sensor.arc_tags'', ''icon'') }}'
                      icon_color: >-
                        {% set color = 'color_' + state_attr(config.entity,
                        'saturday')[2]|lower %} {{
                        state_attr('binary_sensor.arc_tags', color) }}
                      card_mod:
                        style: |
                          ha-card {
                            --chip-background: none;
                          }
              - type: conditional
                conditions:
                  - condition: state
                    entity: binary_sensor.arc_tags
                    state_not: 'on'
                card:
                  type: custom:mushroom-chips-card
                  chips:
                    - type: template
                      tap_action:
                        action: none
                      hold_action:
                        action: none
                      double_tap_action:
                        action: none
                      entity: sensor.arc_tags
                      icon: mdi:tag
                      icon_color: |
                        {% set color = "color_" + states(config.entity)|lower %}
                        {{ state_attr('binary_sensor.arc_tags', color) }}
                      content: Arc Tag
                      card_mod:
                        style: |
                          ha-card {
                            --chip-background: none;
                          }
              - type: vertical-stack
                cards:
                  - type: custom:bubble-card
                    card_type: pop-up
                    hash: '#climate'
                    scrolling_effect: false
                    show_icon: false
                    name: Climate Control
                    bg_color: '#2C2B29'
                  - type: custom:mushroom-template-card
                    primary: Inside Temp
                    secondary: '{{ state_attr(entity,''current_temperature'')|round(0) }}°'
                    icon: mdi:thermometer
                    entity: climate.ecobee3
                    tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          --card-secondary-font-size: 1.5rem;
                          --card-secondary-font-weight: bold;
                          --ha-card-background: transparent;
                          --card-secondary-line-height: 1;
                        }
                  - type: custom:bubble-card
                    card_type: climate
                    entity: climate.ecobee3
                    sub_button:
                      - name: HVAC modes menu
                        select_attribute: hvac_modes
                        state_background: false
                        show_arrow: false
                    scrolling_effect: false
                    show_state: true
                    show_attribute: true
                    attribute: hvac_action
                    tap_action:
                      action: none
                    double_tap_action:
                      action: more-info
                    hold_action:
                      action: none
            view_layout:
              grid-area: sidebar
          - type: vertical-stack
            cards:
              - type: custom:mushroom-chips-card
                chips:
                  - type: template
                    entity: binary_sensor.garage_door_sensor
                    content: Garage {{ state_translated(config.entity) }}
                    tap_action:
                      action: none
                    icon: >-
                      {{ iif(states(config.entity)=='on', 'mdi:garage-open',
                      "mdi:garage") }}
                    icon_color: '{% var(--rgb-red) if(is_state(entity, ''on'')) %}'
                  - type: template
                    entity: binary_sensor.front_door
                    content: Front Door {{ state_translated(config.entity) }}
                    tap_action:
                      action: none
                    icon: >-
                      {{ iif(states(config.entity)=='on', 'mdi:door-open',
                      "mdi:door-closed") }}
                    icon_color: '{% var(--rgb-red) if(is_state(entity, ''on'')) %}'
                  - type: template
                    entity: binary_sensor.back_door
                    content: Back Door {{ state_translated(config.entity) }}
                    tap_action:
                      action: none
                    icon: >-
                      {{ iif(states(config.entity)=='on', 'mdi:door-open',
                      "mdi:door-closed") }}
                    icon_color: '{% var(--rgb-red) if(is_state(entity, ''on'')) %}'
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.chest_freezer
                        state: 'on'
                    chip:
                      type: entity
                      entity: binary_sensor.chest_freezer
                      name: Big Freezer Open
                      content_info: name
                      icon_color: accent
                      tap_action:
                        action: none
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.chest_freezer_2
                        state: 'on'
                    chip:
                      type: entity
                      entity: binary_sensor.chest_freezer_2
                      name: Smaller Freezer Open
                      content_info: name
                      icon_color: accent
                      tap_action:
                        action: none
                card_mod:
                  style: |
                    ha-card {
                      --chip-box-shadow: none;
                      --chip-background: none;
                    }
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: repeat(2, 50%)
                  grid-gap: 0.25rem;
                  align-items: center
                  mediaquery:
                    '(min-width: 600px)':
                      grid-template-columns: repeat(4, 25%)
                cards:
                  - type: custom:bubble-card
                    card_type: button
                    entity: light.porch_light
                    scrolling_effect: false
                    tap_action:
                      action: toggle
                    double_tap_action:
                      action: none
                    hold_action:
                      action: none
                    button_action:
                      double_tap_action:
                        action: none
                      hold_action:
                        action: none
                    styles: ''
                    show_icon: true
                    use_accent_color: true
                  - type: custom:bubble-card
                    card_type: button
                    entity: light.kitchen_light
                    scrolling_effect: false
                    tap_action:
                      action: toggle
                    double_tap_action:
                      action: none
                    hold_action:
                      action: none
                    button_action:
                      double_tap_action:
                        action: none
                      hold_action:
                        action: none
                    name: Kitchen
                    use_accent_color: true
                  - type: custom:bubble-card
                    card_type: button
                    entity: light.entryway_light
                    scrolling_effect: false
                    tap_action:
                      action: toggle
                    double_tap_action:
                      action: none
                    hold_action:
                      action: none
                    button_action:
                      double_tap_action:
                        action: none
                      hold_action:
                        action: none
                    name: Entryway
                    use_accent_color: true
                  - type: custom:bubble-card
                    card_type: button
                    button_type: slider
                    entity: light.livingroom_light
                    scrolling_effect: false
                    name: Living Room
                    tap_action:
                      action: toggle
                    double_tap_action:
                      action: none
                    hold_action:
                      action: nothing
                    use_accent_color: true
                  - type: custom:bubble-card
                    card_type: button
                    button_type: slider
                    entity: light.dining_room_light
                    scrolling_effect: false
                    name: Dining Room
                    tap_action:
                      action: toggle
                    double_tap_action:
                      action: none
                    hold_action:
                      action: nothing
                    use_accent_color: true
                  - type: custom:bubble-card
                    card_type: button
                    entity: light.credenza_lights
                    scrolling_effect: false
                    tap_action:
                      action: toggle
                    double_tap_action:
                      action: none
                    hold_action:
                      action: none
                    button_action:
                      double_tap_action:
                        action: none
                      hold_action:
                        action: none
                    name: Credenza
                    use_accent_color: true
                  - type: custom:bubble-card
                    card_type: button
                    button_type: slider
                    entity: light.den_light
                    scrolling_effect: false
                    name: Den Corners
                    tap_action:
                      action: toggle
                    double_tap_action:
                      action: none
                    hold_action:
                      action: navigate
                      navigation_path: '#denlights'
                    use_accent_color: true
              - type: custom:mushroom-chips-card
                chips:
                  - type: template
                    tap_action:
                      action: call-service
                      service: switch.toggle
                      target:
                        entity_id: switch.den_tablet_outlet_switch_2
                    icon: >-
                      {{ iif(states(config.entity)=="on",
                      "mdi:battery-charging-60", "mdi:battery-60") }}
                    entity: switch.den_tablet_outlet_switch_2
                    content: >-
                      Tablet {{ iif(states(config.entity)=="on", "charging", "on
                      battery") }}
                    icon_color: |-
                      {{
                        iif(states(config.entity)=="on","var(--rgb-info-color)","var(--rgb-warning-color)")
                      }}
                  - type: template
                    tap_action:
                      action: toggle
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    entity: automation.livingroom_nightlight
                    icon: >-
                      {{ 'mdi:motion-sensor' if is_state(config.entity, 'on')
                      else 'mdi:motion-sensor-off' }}
                    content: >-
                      Living Room Night Light {{ iif(is_state(config.entity,
                      'on'), "Enabled", "Disabled") }}
                    icon_color: >-
                      {{ 'var(--rgb-state-light-color)' if
                      is_state(config.entity, 'on') }}
                card_mod:
                  style: |
                    ha-card {
                      --chip-box-shadow: none;
                      --chip-background: none;
                    }
              - type: custom:layout-card
                layout_type: custom:grid-layout
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.monthly_data_usage_gb
                    primary: Monthly Data Usage
                    secondary: >-
                      {{ states(config.entity)|round(0) }} {{
                      state_attr(config.entity, 'unit_of_measurement') }}
                    icon: mdi:download
                    icon_color: disabled
                    card_mod:
                      style: |
                        ha-card {
                          border-radius: 14px;
                          --ha-card-background: transparent;
                        }
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/monthly-data
                  - type: custom:mushroom-template-card
                    entity: binary_sensor.plex_ping
                    icon: mdi:plex
                    icon_color: white
                    primary: Plex
                    secondary: >-
                      {% if( states("binary_sensor.plex_streaming")|bool == true
                      ) %}
                       {{ states("sensor.scylla")|int }} Streaming
                      {% else %}

                      {{ state_translated(config.entity) }}

                      {% endif %}
                    badge_icon: ''
                    badge_color: ''
                    tap_action:
                      action: navigate
                      navigation_path: '#plexpop'
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          border-radius: 14px;
                          --ha-card-background: {% if states('binary_sensor.plex_streaming') == 'on' %} rgba(3, 155, 229, .6) {% elif states(config.entity)|bool == false %} red {% else %} transparent {% endif %}
                        }
                layout:
                  grid-template-columns: repeat(4, min-content)
                  mediaquery:
                    '(max-width: 600px)':
                      grid-template-columns: 50% 50%
                card_mod:
                  style: |
                    ha-card {
                      align-items: center;
                    }
              - type: vertical-stack
                cards:
                  - type: custom:bubble-card
                    card_type: pop-up
                    hash: '#denlights'
                    scrolling_effect: false
                    show_icon: false
                    name: Den Lights
                    bg_color: '#2C2B29'
                  - features:
                      - type: light-brightness
                    type: tile
                    entity: light.den_light
                    features_position: inline
                    vertical: false
                    name: Den Lights (Together)
                  - features:
                      - type: light-brightness
                    type: tile
                    entity: light.den_light_1
                    features_position: inline
                    vertical: false
                    name: Den Light 1
                  - features:
                      - type: light-brightness
                    type: tile
                    entity: light.den_light_2
                    features_position: inline
                    vertical: false
                    name: Den Light 1
              - type: vertical-stack
                cards:
                  - type: custom:bubble-card
                    card_type: pop-up
                    hash: '#plexpop'
                    scrolling_effect: false
                    show_icon: false
                    name: Plex
                    bg_color: '#2C2B29'
                  - type: tile
                    entity: sensor.scylla
                    tap_action:
                      action: none
                    icon_tap_action:
                      action: none
                    hold_action:
                      action: more-info
                    features_position: bottom
                    vertical: false
                  - type: conditional
                    conditions:
                      - condition: numeric_state
                        entity: sensor.tautulli_stream_data
                        above: 0
                    card:
                      type: markdown
                      content: >-
                        {% for s in state_attr('sensor.tautulli_stream_data',
                        'sessions') %} {% set decision_str =
                        s.transcode_decision|replace('copy', 'direct stream') %}
                        {% set decision_cnt =
                        s.stream_container_decision|replace('copy', 'direct
                        stream') %} {% set decision_vid =
                        s.video_decision|replace('copy', 'direct stream') %} {%
                        set decision_aud = s.audio_decision|replace('copy',
                        'direct stream') %} {% set decision_sub =
                        s.subtitle_decision|replace("ignore", "direct play") %}
                        {% set decision_sub = iif(decision_sub == '', 'direct
                        play', decision_sub) %}

                        {% set title = iif(s.media_type=='movie', s.title,
                        s.grandparent_title) %} {% set src_aud =
                        s.audio_codec|upper + ' ' +
                        s.audio_channel_layout|replace('(side)', '') %} {% set
                        str_aud = s.stream_audio_codec|upper + ' ' +
                        s.stream_audio_channel_layout|replace('(side)', '') %}

                        {{ iif(s.media_type == 'episode', '<ha-icon
                        icon="mdi:television"></ha-icon>', '<ha-icon
                        icon="mdi:movie"></ha-icon>') }} **{{ s.user }}**
                        {{s.state|replace('paused','playing')}} _{{ title }}_
                        ({{ s.year }}){% if s.media_type == 'episode' %}
                          {{ s.parent_title|replace('Season ', 'S')|replace('Series ', 'S') }} E{{ s.media_index }} - {{s.title}}
                        {% endif %}{% if s.state=='paused' %} (paused){% endif
                        %}


                        | | |

                        | -------- | ------- |

                        | **Quality** | {{ s.quality_profile|title }} |

                        | **Stream** | {{ decision_str|title }}{% if
                        s.throttled|int == 1 %} (Throttled){% endif %} |

                        | **Container** | {{ decision_cnt|title }}{% if
                        decision_cnt == 'transcode' %} ({{ s.container|upper }}
                        > {{ s.stream_container|upper }}){% endif %} |

                        | **Video** | {{ decision_vid|title }}
                        ({{s.stream_video_codec|upper}} {{
                        s.stream_video_full_resolution }})|

                        | **Audio** | {{ decision_aud|title }} ({{ src_aud }}{%
                        if src_aud != str_aud %} > {{ str_aud }}{% endif %}) |

                        | **Subs** | {{ decision_sub|title }}{% if decision_sub
                        != 'Off' %} ({{s.stream_subtitle_codec|upper }}){% endif
                        %} |

                        {% if not loop.last %}-----{% endif %}

                        {% endfor %}
            view_layout:
              grid-area: main
  - theme: Fluent Orange
    path: light-controls
    subview: false
    type: panel
    title: Lights
    icon: ''
    cards:
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: repeat(3, 1fr)
          grid-template-rows: auto
          grid-gap: 0.5rem
          mediaquery:
            '(max-width: 800px)':
              grid-template-columns: 100%
        cards:
          - type: vertical-stack
            cards:
              - type: custom:scheduler-card
                include:
                  - light.porch_light
                exclude: []
                discover_existing: false
                sort_by:
                  - state
                  - title
                display_options:
                  primary_info: default
                  secondary_info:
                    - time
                  icon: action
                show_header_toggle: true
                title: Porch Light Timer
                card_mod:
                  style: |
                    ha-card .card-header div.name {font-size: 16px !important;}
                    ha-card .schedule-row {margin: 5px 0 !important;}
                    ha-card .info {line-height: unset !important;}
                    ha-card .card-content {padding-bottom: 0 !important;}
                    ha-card .card-actions {padding: 0 !important;}
              - type: conditional
                conditions:
                  - condition: state
                    entity: switch.uv_lights
                    state_not: unavailable
                card:
                  type: custom:stack-in-card
                  card_mod:
                    style: |
                      ha-card {
                        border-radius: 14px;
                      }
                  cards:
                    - type: custom:mushroom-entity-card
                      entity: switch.uv_lights
                      icon: mdi:flower
                      tap_action:
                        action: toggle
                      hold_action:
                        action: none
                      double_tap_action:
                        action: none
                    - type: custom:scheduler-card
                      include:
                        - switch.uv_lights
                      exclude: []
                      time_step: 15
                      display_options:
                        primary_info: default
                        secondary_info:
                          - time
                        icon: action
                      sort_by:
                        - title
                      discover_existing: false
                      title: UV Lights Timer
                      show_header_toggle: true
                      card_mod:
                        style: >
                          ha-card .card-header div.name {font-size: 16px
                          !important;}

                          ha-card .card-header {padding-top: 0 !important;}

                          ha-card .schedule-row {margin: 5px 0 !important;}

                          ha-card .info {line-height: unset !important;}

                          ha-card .card-content {padding-bottom: 0 !important;}

                          ha-card .card-actions {padding: 0 !important;}
          - type: vertical-stack
            cards:
              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 14px;
                    }
                cards:
                  - type: custom:mushroom-template-card
                    primary: Living Room Nightlight
                    secondary: >-
                      {{ 'Enabled' if is_state(config.entity, 'on') else
                      'Disabled'}}
                    icon: mdi:motion-sensor
                    icon_color: >-
                      {{ 'var(--rgb-state-light-color)' if
                      is_state(config.entity, 'on') }}
                    badge_icon: >-
                      {{ 'mdi:circle' if
                      is_state('input_boolean.livingroom_nightlight_status',
                      'on') }}
                    badge_color: white
                    tap_action:
                      action: toggle
                    entity: automation.livingroom_nightlight
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: automation.livingroom_nightlight
                        state: 'on'
                    card:
                      type: custom:scheduler-card
                      include:
                        - input_boolean.livingroom_nightlight
                      exclude: []
                      title: false
                      discover_existing: false
                      sort_by:
                        - state
                        - title
                      display_options:
                        primary_info: default
                        secondary_info:
                          - time
                        icon: action
                      card_mod:
                        style: >
                          ha-card .card-header div.name {font-size: 16px
                          !important;}

                          ha-card .schedule-row {margin: 5px 0 !important;}

                          ha-card .info {line-height: unset !important;}

                          ha-card .card-content {padding-bottom: 0 !important;}

                          ha-card .card-actions {padding: 0 !important;}

                          ha-card .card-header, ha-switch {display: none
                          !important;}
              - type: custom:mushroom-entity-card
                entity: input_boolean.vacation_mode
                tap_action:
                  action: toggle
                hold_action:
                  action: none
                double_tap_action:
                  action: none
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 14px;
                    }
              - type: custom:mushroom-template-card
                primary: Guest Room Light
                secondary: Toggle
                icon: mdi:lightbulb
                tap_action:
                  action: perform-action
                  perform_action: automation.trigger
                  target:
                    entity_id: automation.guest_room_light
                  data:
                    skip_condition: true
                entity: automation.guest_room_light
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 14px;
                    }
              - type: custom:mushroom-template-card
                entity: input_boolean.christmas_season
                primary: Tis the Christmas Season?
                secondary: '{{ ''Yes'' if is_state(config.entity, ''on'') else ''No''}}'
                icon: '{{ state_attr(config.entity, ''icon'') }}'
                icon_color: >-
                  {{ 'var(--rgb-state-light-color)'
                  if(states(config.entity)=='on') }}
                tap_action:
                  action: toggle
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 14px;
                    }
          - type: vertical-stack
            cards:
              - type: custom:stack-in-card
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 14px;
                    }
                cards:
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: input_boolean.christmas_season
                        state: 'on'
                      - condition: and
                        conditions:
                          - condition: state
                            entity: switch.christmas_tree_switch
                            state_not: unavailable
                    card:
                      type: vertical-stack
                      cards:
                        - type: custom:mushroom-light-card
                          entity: light.christmas_tree_switch
                          name: Christmas Tree
                          tap_action:
                            action: toggle
                        - type: custom:scheduler-card
                          include:
                            - input_boolean.guest_mode
                            - input_boolean.vacation_mode
                            - switch.christmas_tree_switch
                          exclude: []
                          time_step: 15
                          display_options:
                            primary_info: default
                            secondary_info:
                              - time
                            icon: action
                          sort_by:
                            - title
                          discover_existing: false
                          title: Christmas Tree Timer
                          show_header_toggle: true
                          card_mod:
                            style: >
                              ha-card .card-header div.name {font-size: 16px
                              !important;}

                              ha-card .schedule-row {margin: 5px 0 !important;}

                              ha-card .info {line-height: unset !important;}

                              ha-card .card-content {padding-bottom: 0
                              !important;}

                              ha-card .card-actions {padding: 0 !important;}
                  - type: conditional
                    conditions:
                      - condition: state
                        entity: input_boolean.christmas_season
                        state: 'on'
                      - condition: and
                        conditions:
                          - condition: state
                            entity: switch.christmas_lights
                            state_not: unavailable
                    card:
                      type: vertical-stack
                      cards:
                        - type: custom:mushroom-light-card
                          entity: light.christmas_lights
                          name: Outside Lights
                          tap_action:
                            action: toggle
                          card_mod:
                            style: |
                              ha-card {
                                border-radius: 14px;
                              }
                        - type: custom:scheduler-card
                          include:
                            - input_boolean.guest_mode
                            - input_boolean.vacation_mode
                            - switch.christmas_lights
                          exclude: []
                          time_step: 15
                          display_options:
                            primary_info: default
                            secondary_info:
                              - time
                            icon: action
                          sort_by:
                            - title
                          discover_existing: false
                          title: Outside Lights Timer
                          show_header_toggle: true
                          card_mod:
                            style: >
                              ha-card .card-header div.name {font-size: 16px
                              !important;}

                              ha-card .card-header .name {font-size: 16px
                              !important;}

                              ha-card .schedule-row {margin: 5px 0 !important;}

                              ha-card .info {line-height: unset !important;}

                              ha-card .card-content {padding-bottom: 0
                              !important;}

                              ha-card .card-actions {padding: 0 !important;}
  - title: Homelab
    path: homelab
    icon: mdi:nas
    visible:
      - user: 1adcbfbd5637444bacb8239bc794bb4a
    type: panel
    cards:
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: repeat(4, 24%)
          grid-template-rows: auto
          grid-gap: 0
          mediaquery:
            '(max-width: 800px)':
              grid-template-columns: 100%
        cards:
          - type: vertical-stack
            cards:
              - type: custom:mushroom-chips-card
                chips:
                  - type: entity
                    entity: sensor.scylla
                    content_info: name
                    name: Host Status
                    icon: mdi:desktop-classic
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                alignment: center
              - type: custom:uptime-card
                entity: binary_sensor.charybdis_ping
                icon: mdi:server
                title_template: Uptime
                duration:
                  quantity: 72
                  unit: hour
                icon_adaptive_color: true
                ok: 'on'
                ko: 'off'
                alias:
                  ok: Up
                  ko: Down
                show:
                  icon: false
                  status: false
                bar:
                  amount: 36
                  height: 10
                color:
                  ok: green
                  ko: red
                  half: '#eab700'
                tap_action:
                  action: more-info
              - type: custom:apexcharts-card
                graph_span: 12h
                yaxis:
                  - id: watts
                    show: false
                    decimals: 0
                    min: '|-10|'
                    max: '|+10|'
                    apex_config:
                      tickAmount: 4
                  - id: cpu
                    decimals: 0
                    min: 0
                    max: 100
                    apex_config:
                      tickAmount: 4
                  - id: streaming
                    decimals: 0
                    min: 0
                    max: 1
                    show: false
                series:
                  - entity: sensor.charybdis_cpu_load
                    name: CPU Load
                    yaxis_id: cpu
                    stroke_width: 2
                  - entity: binary_sensor.plex_streaming
                    yaxis_id: streaming
                    show:
                      legend_value: false
                    type: area
                    transform: return x === "on" ? 1:0;
                    curve: stepline
                    color: white
                    opacity: 0.3
                    stroke_width: 0
                apex_config:
                  chart:
                    height: 250px
          - type: vertical-stack
            cards:
              - type: custom:mushroom-chips-card
                chips:
                  - type: entity
                    entity: sensor.scylla
                    content_info: name
                    name: Plex Status
                    icon: mdi:plex
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                alignment: center
              - type: custom:uptime-card
                entity: binary_sensor.plex_ping
                icon: mdi:server
                title_template: Uptime
                duration:
                  quantity: 72
                  unit: hour
                icon_adaptive_color: true
                ok: 'on'
                ko: 'off'
                alias:
                  ok: Up
                  ko: Down
                show:
                  icon: false
                  status: false
                bar:
                  amount: 36
                  height: 10
                color:
                  ok: green
                  ko: red
                  half: '#eab700'
                tap_action:
                  action: more-info
              - type: entities
                entities:
                  - entity: binary_sensor.charybdis_ping
                    name: Host
                  - entity: binary_sensor.plex_ping
                    name: Server
                    icon: mdi:check-network-outline
                  - entity: binary_sensor.tautulli_running
                    name: Tautulli
                    icon: mdi:math-log
                    secondary_info: none
                show_header_toggle: false
                card_mod:
                  style: |
                    ha-card #states > div {
                      margin: 0 !important;
                    }
                    .state {
                      font-size: unset !important;
                    }
              - type: tile
                entity: sensor.scylla
                tap_action:
                  action: none
                icon_tap_action:
                  action: none
                features_position: bottom
                vertical: false
              - type: tile
                entity: input_boolean.tautulli_notifications
                tap_action:
                  action: toggle
          - type: vertical-stack
            cards:
              - type: custom:mushroom-chips-card
                chips:
                  - type: entity
                    entity: device_tracker.synology_ds420j_nas
                    content_info: name
                    name: NAS Status
                    icon: mdi:nas
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                alignment: center
              - type: custom:uptime-card
                entity: binary_sensor.ds420j_online
                icon: mdi:server
                title_template: Uptime
                duration:
                  quantity: 72
                  unit: hour
                icon_adaptive_color: true
                ok: 'on'
                ko: 'off'
                alias:
                  ok: Up
                  ko: Down
                show:
                  icon: false
                  status: false
                bar:
                  amount: 36
                  height: 10
                color:
                  ok: green
                  ko: red
                  half: '#eab700'
                tap_action:
                  action: more-info
              - type: entities
                entities:
                  - entity: sensor.ds420j_volume_1_total_size
                    name: Total Space
                  - entity: sensor.ds420j_volume_1_used_space
                    name: Used Space
                  - entity: sensor.ds420j_volume_1_volume_used
                    name: Utilization
                  - entity: sensor.ds420j_cpu_load_total
                    name: CPU Load
                  - entity: sensor.ds420j_temperature
                    name: Temperature
                show_header_toggle: false
                card_mod:
                  style: |
                    ha-card #states > div {
                      margin: 0 !important;
                    }
                    ha-card .state {
                      font-size: .9rem !important;
                    }
              - type: custom:mushroom-template-card
                entity: input_boolean.nas_shutdown
                primary: Initiate NAS Shutdown
                icon_color: '{{ iif(states(config.entity) == "on","red", "white") }}'
                secondary: >-
                  {{ iif(states(config.entity) == "on", "Tap to disable",
                  "Long-press to enable") }}
                tap_action:
                  action: call-service
                  service: input_boolean.turn_off
                  target:
                    entity_id: input_boolean.nas_shutdown
                hold_action:
                  action: toggle
                icon: '{{ state_attr(config.entity, "icon") }}'
                badge_icon: '{{ mdi:alert if(states(config.entity) == "on") }}'
                badge_color: red
                double_tap_action:
                  action: none
              - type: conditional
                conditions:
                  - entity: input_boolean.nas_shutdown
                    state: 'on'
                card:
                  type: horizontal-stack
                  cards:
                    - type: tile
                      entity: button.ds420j_shutdown
                      icon_tap_action:
                        action: none
                      tap_action:
                        action: perform-action
                        perform_action: button.press
                        target:
                          entity_id: button.ds420j_shutdown
                      hide_state: true
                      name: Shut Down NAS
                      color: red
                    - type: tile
                      entity: button.ds420j_reboot
                      icon_tap_action:
                        action: none
                      tap_action:
                        action: perform-action
                        perform_action: button.press
                        target:
                          entity_id: button.ds420j_reboot
                      hide_state: true
                      name: Reboot NAS
                      color: orange
          - type: vertical-stack
            cards:
              - type: custom:mushroom-chips-card
                chips:
                  - type: entity
                    entity: sensor.ups_battery_charge
                    content_info: name
                    name: UPS Status
                    icon: mdi:power-plug-battery
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    double_tap_action:
                      action: none
                alignment: center
              - type: custom:uptime-card
                entity: sensor.ups_status
                icon: mdi:server
                title_template: Uptime
                duration:
                  quantity: 72
                  unit: hour
                icon_adaptive_color: true
                ok: Online
                ko: 'off'
                alias:
                  ok: Up
                  ko: Down
                show:
                  icon: false
                  status: false
                bar:
                  amount: 36
                  height: 10
                color:
                  ok: green
                  ko: red
                  half: '#eab700'
                tap_action:
                  action: more-info
              - type: custom:mini-graph-card
                entities:
                  - sensor.ups_battery_charge
                name: Battery Charge
                show:
                  header: false
                  labels: true
                  name: true
                  icon: false
                lower_bound: ~0
                upper_bound: 100
    theme: Fluent Orange
    layout:
      layout:
        grid-template-columns: repeat(2, 50%)
        align-items: center
        mediaquery:
          '(min-width: 600px)':
            grid-template-columns: repeat(4, 25%)
  - path: openings
    title: Openings
    icon: ''
    visible:
      - user: 1adcbfbd5637444bacb8239bc794bb4a
      - user: 03dd7450aa7f4d0e8df8ed730df485b1
    cards:
      - type: entities
        entities:
          - entity: binary_sensor.front_door
          - entity: binary_sensor.back_door
          - entity: binary_sensor.garage_door_sensor
            name: Garage Door
          - entity: binary_sensor.exterior_openings
        title: Doors
        show_header_toggle: false
        state_color: true
      - type: custom:clock-weather-card
        entity: weather.kbkf
        hide_date: true
        hide_clock: true
        locale: en-US
        animated_icon: false
    theme: Fluent Orange
  - path: monthly-data
    title: Monthly Data
    subview: true
    type: panel
    cards:
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: 25% 75%
          grid-template-rows: auto
          grid-template-areas: |
            "sidebar main"
          grid-gap: 0
          mediaquery:
            '(max-width: 600px)':
              grid-template-columns: 100%
              grid-template-areas: |
                "sidebar"
                "main"
        cards:
          - type: vertical-stack
            cards:
              - type: custom:mushroom-template-card
                entity: sensor.monthly_data_usage_gb
                secondary: used this month
                primary: >-
                  {{states(config.entity)|round(1)}} {{
                  state_attr(config.entity, 'unit_of_measurement') }}
                icon: mdi:cloud
                icon_color: var(--rgb-info-color)
                tap_action:
                  action: none
                hold_action:
                  action: none
                card_mod:
                  style: |
                    ha-card {
                      --ha-card-background: transparent;
                      --card-primary-font-size: 2rem;
                      --card-primary-line-height: 1;
                    }
              - type: custom:stack-in-card
                mode: vertical
                card_mod:
                  style: |
                    ha-card {
                      --ha-card-background: transparent;
                    }
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.month_gone
                    primary: '{{ states(config.entity)|round(1) }}%'
                    secondary: into the month
                    name: Into this month
                    icon: mdi:calendar-arrow-right
                    icon_color: white
                    tap_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          --ha-card-background: transparent;
                          --card-primary-font-size: 2rem;
                          --card-primary-line-height: 1;
                        }
                  - type: custom:bar-card
                    height: 12px
                    color: white
                    tap_action:
                      action: none
                    entities:
                      - entity: sensor.month_gone
                        name: Month
                    positions:
                      icon: 'off'
                      indicator: 'off'
                      name: 'off'
                      value: 'off'
            view_layout:
              grid-area: sidebar
          - type: custom:layout-card
            layout_type: custom:grid-layout
            layout:
              grid-template-columns: 50% 50%
              mediaquery:
                '(max-width: 600px)':
                  grid-template-columns: 100%
            cards:
              - chart_type: bar
                period: hour
                type: statistics-graph
                entities:
                  - sensor.download_this_month_gb
                  - sensor.upload_this_month_gb
                stat_types:
                  - change
                logarithmic_scale: false
                days_to_show: 3
              - type: history-graph
                entities:
                  - entity: sensor.monthly_data_usage_gb
                min_y_axis: 0
                fit_y_data: true
                hours_to_show: 144
                logarithmic_scale: false
            grid-area: main
    theme: Fluent Orange
  - path: batteries
    icon: hass:battery-charging-70
    visible:
      - user: 1adcbfbd5637444bacb8239bc794bb4a
    type: custom:horizontal-layout
    cards:
      - type: custom:auto-entities
        card:
          type: entities
          title: Low Batteries
          show_header_toggle: false
        filter:
          include:
            - entity_id: sensor.*battery*
          exclude:
            - entity_id: '*iphone*'
            - entity_id: sensor.space_between*
            - entity_id: sensor.abhorred*
            - entity_id: sensor.neatfreak*
            - state: unavailable
            - state: '> 70'
        show_empty: false
      - type: custom:auto-entities
        card:
          type: entities
          title: Unavailable Sensors
          show_header_toggle: false
          state_color: true
        filter:
          include:
            - state: unavailable
          exclude:
            - domain: camera
            - domain: vacuum
            - domain: media_player
            - domain: device_tracker
            - entity_id: '*speedtest*'
            - entity_id: '*plex*'
            - entity_id: '*_identifybutton'
        show_empty: true
        sort:
          method: friendly_name
      - type: custom:auto-entities
        card:
          type: entities
          state_color: true
          show_header_toggle: false
          title: Windows
        filter:
          include:
            - domain: binary_sensor
              entity_id: '*window*'
            - domain: group
              entity_id: '*window*'
          exclude: []
        sort:
          method: friendly_name
    theme: Fluent Orange
  - subview: false
    title: Trash
    path: trash-schedule
    cards:
      - initial_view: dayGridMonth
        type: calendar
        entities:
          - calendar.trash_pickup
          - calendar.recycling_pickup
        view_layout:
          position: main
        card_mod:
          style:
            ha-full-calendar:
              $: |
                #calendar {
                  max-height: 90vh !important;
                }
                h1 {
                  font-size: 1rem !important;
                  font-weight: bold !important;
                }
                th.fc-col-header-cell.fc-day {
                  background-color: unset !important;
                }
                .fc .fc-daygrid-event {
                  padding 0px !important;
                  margin 0px !important;
                }
                td.fc-day-today .fc-daygrid-day-number {
                  background-color: var(--info-color) !important;
                }
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: ''
            subtitle: Select any pickup event from the calendar to reschedule it.
            title_tap_action:
              action: none
            subtitle_tap_action:
              action: none
          - type: tile
            entity: sensor.next_trash_pickup
            tap_action:
              action: none
          - type: tile
            entity: sensor.next_recycling_pickup
            tap_action:
              action: none
        view_layout:
          position: sidebar
    theme: Fluent Orange
    type: sidebar
    icon: mdi:delete
  - type: masonry
    path: network-access
    title: Network Access
    visible:
      - user: 1adcbfbd5637444bacb8239bc794bb4a
    cards:
      - type: custom:auto-entities
        card:
          type: entities
        filter:
          include:
            - entity_id: '*allowed_on_network*'
          exclude: []
        sort:
          method: friendly_name
          ignore_case: true
