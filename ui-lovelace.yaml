views:
  - theme: Fluent Orange
    title: Home
    path: home
    visible:
      - user: 1adcbfbd5637444bacb8239bc794bb4a
      - user: 25121d6fff8247f5b3c8b55198ff4705
      - user: 03dd7450aa7f4d0e8df8ed730df485b1
    layout:
      grid-template-columns: 100%
      grid-template-rows: auto
      grid-gap: 0
      mediaquery:
        '(min-width: 800px)':
          grid-template-columns: 30% 70%
          grid-template-rows: auto
          grid-gap: 10px
    type: panel
    icon: mdi:home-circle-outline
    cards:
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: 35% auto
          grid-template-rows: auto
          grid-template-areas: |
            "sidebar main"
          grid-gap: 0
          mediaquery:
            '(max-width: 600px)':
              grid-template-columns: 100%
              grid-template-areas: |
                "sidebar"
                "main"
        cards:
          - type: vertical-stack
            cards:
              - type: custom:mushroom-template-card
                entity: sensor.date
                primary: '{{ now().strftime("%-I:%M") + now().strftime("%p").lower() }}'
                secondary: '{{ now().strftime("%A") }}, {{ now().strftime("%B %-d") }}'
                tap_action:
                  action: none
                fill_container: true
                card_mod:
                  style: |
                    ha-card {
                      --ha-card-background: transparent;
                      padding-bottom: 0 !important;
                    }
                    @media (min-width: 600px) {
                      ha-card {
                      --card-primary-font-size: 4rem;
                      --card-secondary-font-size: 1.5rem;
                      --card-primary-line-height: 1.25;
                      --card-secondary-line-height: 1.5;
                      }
                    }
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.ecobee3_temperature
                    primary: Inside
                    secondary: '{{ states(config.entity)|int }}°'
                    icon: mdi:home-thermometer-outline
                    icon_color: >
                      {% if states("climate.ecobee3") == "heat" %}
                      var(--rgb-red)

                      {% endif %}
                    badge_icon: >-
                      {{ "mdi:fan" if states("binary_sensor.furnace_running") ==
                      "on" }} 
                    badge_color: var(--rgb-grey)
                    tap_action:
                      action: navigate
                      navigation_path: /lovelace/climate
                    hold_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          --card-secondary-font-size: 1.5rem;
                          --card-secondary-font-weight: bold;
                          --ha-card-background: transparent;
                          --card-secondary-line-height: 1;
                        }
                        @media (min-width: 600px) {
                          ha-card {
                          --card-secondary-font-size: 2.5rem;
                          }
                        }
                        {% if states("binary_sensor.furnace_running") == "on" %}
                        mushroom-badge-icon {
                          animation: spin 2s linear infinite;
                        }
                        @keyframes spin {
                          from {transform:rotate(0deg);}
                          to {transform:rotate(360deg);}
                        }
                        {% endif %}
                  - type: custom:mushroom-template-card
                    entity: weather.ecobee3
                    primary: Outside
                    secondary: '{{ state_attr(config.entity, "temperature")|int }}°'
                    icon: ''
                    tap_action:
                      action: navigate
                      navigation_path: weather
                    card_mod:
                      style: |
                        ha-card {
                          --card-secondary-font-size: 1.5rem;
                          --card-secondary-font-weight: bold;
                          --ha-card-background: transparent;
                          --card-secondary-line-height: 1;
                        }
                        @media (min-width: 600px) {
                          ha-card {
                          --card-secondary-font-size: 2.5rem;
                          }
                        }
              - type: custom:mushroom-chips-card
                chips:
                  - type: weather
                    entity: weather.ecobee3
                    show_conditions: true
                    show_temperature: false
                    tap_action:
                      action: none
                  - type: template
                    entity: sensor.todays_high
                    content: >-
                      {{states("sensor.todays_high")}}°/{{states("sensor.todays_low")}}°
                    icon: mdi:swap-vertical-bold
                    tap_action:
                      action: none
                card_mod:
                  style: |
                    ha-card {
                      --chip-box-shadow: none;
                      --chip-background: none;
                    }
              - type: custom:mushroom-chips-card
                chips:
                  - type: template
                    entity: sensor.air_quality
                    content: 'Air Quality: {{ states(config.entity) }}'
                    icon: '{{ state_attr(config.entity,"icon") }}'
                    icon_color: '{{ state_attr(config.entity, "color") }}'
                    tap_action:
                      action: more-info
                  - type: template
                    entity: sensor.allergy_index_today
                    content: >-
                      Allergy Index:
                      {{state_attr(config.entity,"rating")|replace("/Medium","/Med")|replace("Medium/","Med/")}}
                    icon: >-
                      {% set trend =
                      state_attr("sensor.allergy_index_forecasted_average",
                      "trend")|lower %} {% if( trend == 'increasing' ) %}
                      mdi:trending-up {% elif(trend == 'subsiding') %}
                      mdi:trending-down {% else %} mdi:circle {% endif %}
                    icon_color: >-
                      {% set rating = state_attr(config.entity,'rating')|lower
                      %}

                      {%
                          set ratings = {
                            'low': 'green',
                            'low/medium': '#EAB700',
                            'medium': 'yellow',
                            'medium/high': 'orange',
                            'high': 'red'
                          }
                      %}

                      {{ ratings[rating] }}
                    tap_action:
                      action: more-info
                card_mod:
                  style: |
                    ha-card {
                      --chip-box-shadow: none;
                      --chip-background: none;
                    }
              - type: custom:mushroom-template-card
                entity: sensor.trash_pickup
                primary: '{{ states(config.entity) }}'
                secondary: '{{ state_attr(config.entity, "date") }}'
                icon: '{{ state_attr(config.entity, "icon") }}'
                icon_color: >
                  {% set prox = state_attr(config.entity,'proximity') %} {%
                  if(prox == 0) %} var(--rgb-info-color) {% elif(prox == 1) %}
                  var(--rgb-warning-color) {% else %}
                  var(--primary-background-color) {% endif %}
                tap_action:
                  action: none
                hold_action:
                  action: more-info
                double_tap_action:
                  action: call-service
                  service: automation.trigger
                  target:
                    entity_id: automation.refresh_trash_data
                  data:
                    skip_condition: true
                card_mod:
                  style: |
                    ha-card {
                      --ha-card-background: transparent;
                    }
            view_layout:
              grid-area: sidebar
          - type: vertical-stack
            cards:
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: repeat(2, 50%)
                  mediaquery:
                    '(min-width: 600px)':
                      grid-template-columns: repeat(3,33%)
                cards:
                  - type: custom:mushroom-light-card
                    entity: light.bar_light
                    name: Bar
                    secondary_info: none
                    icon: mdi:lightbulb
                    card_mod:
                      style: |
                        ha-card {
                          border-radius: 14px
                        }
                  - type: custom:mushroom-template-card
                    entity: light.den_light_2
                    primary: Den Corner
                    icon: mdi:lightbulb
                    icon_color: >-
                      {{ "var(--icon-primary-color)"
                      if(states(config.entity)=="on") }}
                    badge_icon: mdi:cog
                    hold_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          border-radius: 14px
                        }
                  - type: custom:mushroom-light-card
                    entity: light.kitchen_light
                    name: Kitchen
                    secondary_info: none
                    icon: mdi:lightbulb
                    card_mod:
                      style: |
                        ha-card {
                          border-radius: 14px
                        }
                  - type: custom:mushroom-light-card
                    entity: light.porch_light
                    name: Porch
                    secondary_info: none
                    icon: mdi:lightbulb
                    card_mod:
                      style: |
                        ha-card {
                          border-radius: 14px
                        }
                  - type: custom:mushroom-light-card
                    entity: light.entryway_light
                    name: Entryway
                    secondary_info: none
                    icon: mdi:lightbulb
                    card_mod:
                      style: |
                        ha-card {
                          border-radius: 14px
                        }
                  - type: custom:mushroom-template-card
                    entity: light.dining_room_light
                    primary: Dining Room
                    icon: mdi:lightbulb
                    icon_color: >-
                      {{ "var(--icon-primary-color)"
                      if(states(config.entity)=="on") }}
                    badge_icon: mdi:cog
                    hold_action:
                      action: more-info
                    card_mod:
                      style: |
                        ha-card {
                          border-radius: 14px
                        }
                  - type: custom:mushroom-template-card
                    entity: light.livingroom_light
                    primary: Living Room
                    icon: mdi:lightbulb
                    icon_color: >-
                      {{ "var(--icon-primary-color)"
                      if(states(config.entity)=="on") }}
                    badge_icon: mdi:cog
                    hold_action:
                      action: more-info
                    badge_color: ''
                    card_mod:
                      style: |
                        ha-card {
                          border-radius: 14px
                        }
              - type: custom:mushroom-chips-card
                chips:
                  - type: template
                    entity: binary_sensor.garage_door_sensor
                    content: >-
                      Garage: {{
                      iif(states(config.entity)=="on","Open","Closed") }}
                    tap_action:
                      action: none
                    icon: >-
                      {{ iif(states(config.entity)=="on", "mdi:garage-open",
                      "mdi:garage") }}
                    icon_color: '{% var(--rgb-red) if(is_state(entity, "on")) %}'
                  - type: template
                    entity: sensor.plex_libraries
                    content: '{{state_attr(config.entity, "movies")}} movies on Plex'
                    icon: mdi:movie
                    tap_action:
                      action: none
                  - type: template
                    tap_action:
                      action: call-service
                      service: switch.toggle
                      target:
                        entity_id: switch.den_tablet_outlet_switch_2
                    icon: >-
                      {{
                      iif(states(config.entity)=="on","mdi:battery-charging-60","mdi:battery-60")
                      }}
                    entity: switch.den_tablet_outlet_switch_2
                    content: >-
                      Tablet {{ iif(states(config.entity)=="on","charging","on
                      battery") }}
                    icon_color: |-
                      {{
                        iif(states(config.entity)=="on","var(--rgb-info-color)","var(--rgb-warning-color)")
                      }}
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.chest_freezer
                        state: 'on'
                    chip:
                      type: entity
                      entity: binary_sensor.chest_freezer
                      name: Big Freezer Open
                      content_info: name
                      icon_color: accent
                      tap_action:
                        action: none
                  - type: conditional
                    conditions:
                      - entity: binary_sensor.chest_freezer_2
                        state: 'on'
                    chip:
                      type: entity
                      entity: binary_sensor.chest_freezer_2
                      name: Smaller Freezer Open
                      content_info: name
                      icon_color: accent
                      tap_action:
                        action: none
                card_mod:
                  style: |
                    ha-card {
                      --chip-box-shadow: none;
                      --chip-background: none;
                    }
              - type: custom:layout-card
                layout_type: custom:grid-layout
                cards:
                  - type: custom:stack-in-card
                    mode: vertical
                    cards:
                      - type: custom:mushroom-template-card
                        entity: sensor.data_usage_gb
                        icon: >-
                          {% if(states('binary_sensor.monthly_data_concern') ==
                          'on') %}
                            mdi:alert
                          {% else %}
                            mdi:download
                          {% endif %}
                        icon_color: >-
                          {% if(states('binary_sensor.monthly_data_concern') ==
                          'on') %}
                            var(--rgb-warning-color)
                          {% endif %}
                        primary: Monthly Data Cap
                        secondary: >-
                          {{ state_attr(config.entity,"pct_of_cap")|round(0) }}%
                          used
                        tap_action:
                          action: navigate
                          navigation_path: /lovelace/monthly-data
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            ha-card {
                              padding-bottom: 0 !important;
                            }
                      - type: custom:bar-card
                        tap_action:
                          action: none
                        hold_action:
                          action: none
                        card_mod:
                          style: |
                            ha-card > div {
                              padding: .5rem 0 0 0;
                            }
                        height: 4px
                        color: orange
                        entities:
                          - entity: sensor.data_usage_gb
                            attribute: pct_of_cap
                            name: Data Usage
                          - entity: sensor.month_gone
                            name: Month
                            color: grey
                            height: 2px
                        positions:
                          icon: 'off'
                          indicator: 'off'
                          name: 'off'
                          value: 'off'
                  - type: custom:mushroom-template-card
                    entity: binary_sensor.plex_ping
                    icon: mdi:plex
                    icon_color: >-
                      {% if states("binary_sensor.plex_streaming")|bool == true
                      %}
                        var(--rgb-info-color)
                      {% elif states(config.entity) == "on" %}
                        var(--primary-background-color)
                      {% else %}
                        var(--rgb-warning-color)
                      {% endif %}
                    primary: Plex
                    secondary: >-
                      {% if states("binary_sensor.plex_streaming")|bool == true
                      %}
                        Streaming
                      {% elif states(config.entity) == "on" %}
                        Online
                      {% else %}
                        Offline
                      {% endif %}
                    badge_icon: >-
                      {{ iif(states(config.entity) == "on", "mdi:check-bold",
                      "mdi:alert") }}
                    badge_color: '{{ iif(states(config.entity) == "on", "green", "red") }}'
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          --ha-card-background: transparent;
                        }
                layout:
                  grid-template-columns: repeat(4,max-content)
                  mediaquery:
                    '(max-width: 600px)':
                      grid-template-columns: 100%
                card_mod:
                  style: |
                    ha-card {
                      align-items: center;
                    }
            view_layout:
              grid-area: main
  - path: openings
    title: Openings
    icon: ''
    visible:
      - user: 1adcbfbd5637444bacb8239bc794bb4a
      - user: 03dd7450aa7f4d0e8df8ed730df485b1
    cards:
      - type: entities
        entities:
          - entity: binary_sensor.front_door
          - entity: binary_sensor.back_door
          - entity: binary_sensor.garage_door_sensor
            name: Garage Door
          - entity: binary_sensor.exterior_openings
        title: Doors
        show_header_toggle: false
        state_color: true
    theme: Fluent Orange
  - title: Homelab
    path: homelab
    icon: mdi:nas
    visible:
      - user: 1adcbfbd5637444bacb8239bc794bb4a
    type: custom:vertical-layout
    cards:
      - type: vertical-stack
        cards:
          - type: custom:mushroom-template-card
            entity: binary_sensor.plex_ping
            primary: Plex Status
            secondary: |-
              {% if states(config.entity) == "on" %}
                Online
              {% elif states(config.entity) == "off" %}
                Online
              {% else %}
                {{ states(config.entity) | title }}
              {% endif %}
            icon: mdi:plex
            icon_color: >-
              {% if states(config.entity) == "off" or states(config.entity) ==
              "unavailable" or states("sensor.plex_scylla") == "unavailable" %}
                var(--rgb-red)
              {% else %}
                var(--rgb-green)
              {% endif %}
            fill_container: false
            tap_action:
              action: none
            card_mod:
              style: |
                ha-card {
                  --ha-card-background: transparent;
                }
          - type: custom:mushroom-chips-card
            chips:
              - type: template
                entity: binary_sensor.plex_streaming
                content: >-
                  {% set streams = state_attr(config.entity,'local')|int +
                  state_attr(config.entity,'remote')|int %}{{streams}} stream{{
                  iif(streams|int != 1, "s","") }}
                tap_action:
                  action: none
          - type: custom:uptime-card
            entity: binary_sensor.plex_ping
            title_template: Uptime
            duration:
              quantity: 48
              unit: hour
            icon_adaptive_color: true
            ok: 'on'
            ko: 'off'
            alias:
              ok: Up
              ko: Down
            show:
              icon: false
              status: false
            bar:
              amount: 36
              height: 10
            color:
              ok: green
              ko: red
              half: '#eab700'
            tap_action:
              action: none
          - type: horizontal-stack
            cards:
              - type: conditional
                conditions:
                  - condition: state
                    entity: binary_sensor.charybdis_ping
                    state: 'on'
                card:
                  type: custom:apexcharts-card
                  graph_span: 12h
                  update_interval: 2min
                  apex_config:
                    chart:
                      height: 100px
                    grid:
                      show: false
                    xaxis:
                      axisBorder:
                        show: false
                      axisTicks:
                        show: false
                  yaxis:
                    - decimals: 0
                      min: 0
                      max: 100
                      apex_config:
                        tickAmount: 4
                  header:
                    show: true
                    show_states: true
                  series:
                    - entity: sensor.charybdis_cpu_load
                      group_by:
                        func: avg
                        duration: 5min
                      stroke_width: 2
                      name: Charybdis CPU
                      type: line
                      show:
                        legend_value: false
                        in_header: true
                      fill_raw: last
              - type: conditional
                conditions:
                  - condition: state
                    entity: binary_sensor.charybdis_ping
                    state_not: 'on'
                card:
                  type: custom:mushroom-template-card
                  primary: Charybdis Offline
                  secondary: ''
                  icon: mdi:lan-disconnect
                  entity: binary_sensor.charybdis_ping
                  icon_color: red
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: ''
            subtitle: NAS Status
            title_tap_action:
              action: none
          - type: custom:mushroom-chips-card
            chips:
              - type: template
                entity: sensor.ds420j_cpu_load_total
                icon: mdi:chip
                content: 'CPU: {{ states(config.entity) }}%'
                icon_color: ''
                tap_action:
                  action: more-info
              - type: template
                entity: sensor.ds420j_temperature
                icon: mdi:thermometer
                content: >-
                  Temp: {{ states(config.entity) }}{{ state_attr(config.entity,
                  "unit_of_measurement") }}
                tap_action:
                  action: more-info
          - type: custom:uptime-card
            entity: binary_sensor.ds420j_online
            icon: mdi:server
            title_template: Uptime
            duration:
              quantity: 48
              unit: hour
            icon_adaptive_color: true
            ok: 'on'
            ko: 'off'
            alias:
              ok: Up
              ko: Down
            show:
              icon: false
              status: false
            bar:
              amount: 36
              height: 10
            color:
              ok: green
              ko: red
              half: '#eab700'
            tap_action:
              action: more-info
          - type: vertical-stack
            cards:
              - type: custom:mushroom-template-card
                entity: input_boolean.nas_shutdown
                primary: Initiate NAS Shutdown
                icon_color: '{{ iif(states(config.entity) == "on","red", "white") }}'
                secondary: >-
                  {{ iif(states(config.entity) == "on", "Tap to disable",
                  "Long-press to enable") }} shutdown switch
                tap_action:
                  action: call-service
                  service: input_boolean.turn_off
                  target:
                    entity_id: input_boolean.nas_shutdown
                hold_action:
                  action: toggle
                icon: '{{ state_attr(config.entity, "icon") }}'
                badge_icon: '{{ mdi:alert if(states(config.entity) == "on") }}'
                badge_color: red
                double_tap_action:
                  action: none
              - type: conditional
                conditions:
                  - entity: input_boolean.nas_shutdown
                    state: 'on'
                card:
                  type: custom:mushroom-entity-card
                  name: Hold to confirm
                  secondary_info: none
                  icon_color: red
                  tap_action:
                    action: none
                  hold_action:
                    action: call-service
                    service: input_button.press
                    target:
                      entity_id: input_button.nas_shutdown
                  entity: button.ds420j_shutdown
                  double_tap_action:
                    action: none
                  icon: mdi:power-standby
          - type: entities
            entities:
              - entity: sensor.ds420j_volume_1_total_size
              - entity: sensor.ds420j_volume_1_used_space
              - entity: sensor.ds420j_volume_1_volume_used
            show_header_toggle: false
      - type: vertical-stack
        cards:
          - type: custom:mushroom-title-card
            title: ''
            subtitle: UPS Status
          - type: custom:mini-graph-card
            entities:
              - sensor.ups_battery_charge
            name: Battery Charge
            show:
              header: false
              labels: true
              name: true
              icon: false
            lower_bound: ~0
            upper_bound: 100
          - type: custom:uptime-card
            entity: sensor.ups_status
            icon: mdi:server
            title_template: Uptime
            duration:
              quantity: 48
              unit: hour
            icon_adaptive_color: true
            ok: Online
            ko: 'off'
            alias:
              ok: Up
              ko: Down
            show:
              icon: false
              status: false
            bar:
              amount: 36
              height: 10
            color:
              ok: green
              ko: red
              half: '#eab700'
            tap_action:
              action: more-info
    theme: Fluent Orange
  - path: lights
    title: Lights
    type: panel
    cards:
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: 30% auto
          grid-template-rows: auto
          grid-template-areas: |
            "sidebar main"
          grid-gap: 0
          mediaquery:
            '(max-width: 600px)':
              grid-template-columns: 100%
              grid-template-areas: |
                "sidebar"
                "main"
        cards:
          - type: vertical-stack
            cards:
              - type: custom:mushroom-template-card
                icon: mdi:timer
                entity: automation.porch_light_on_timer
                icon_color: '{{ "var(--rgb-info)" if( states(config.entity)=="on" ) }}'
                primary: Porch Light Timer
                secondary: '{{ states(config.entity)|title }}'
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 14px
                    }
                badge_icon: ''
              - type: custom:mushroom-template-card
                icon: mdi:lightbulb-night-outline
                entity: automation.living_room_nightlight
                icon_color: '{{ "var(--rgb-info)" if( states(config.entity)=="on" ) }}'
                primary: Living Room Night Light
                secondary: '{{ states(config.entity)|title }}'
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 14px
                    }
              - type: custom:mushroom-template-card
                entity: automation.living_room_christmas_tree_timer
                icon: mdi:pine-tree
                badge_icon: mdi:cog
                primary: Christmas Tree Timer
                secondary: '{{ states(config.entity)|title }}'
                tap_action:
                  action: toggle
                hold_action:
                  action: none
                icon_color: '{{ "var(--rgb-info)" if( states(config.entity)=="on" ) }}'
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 14px
                    }
              - type: custom:mushroom-template-card
                icon: mdi:string-lights
                badge_icon: mdi:cog
                primary: Outside Christmas Lights Timer
                secondary: '{{ states(config.entity)|title }}'
                tap_action:
                  action: toggle
                hold_action:
                  action: none
                icon_color: '{{ "var(--rgb-info)" if( states(config.entity)=="on" ) }}'
                entity: automation.christmas_lights_timer
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 14px
                    }
              - type: custom:mushroom-template-card
                icon: mdi:home-export-outline
                badge_icon: ''
                primary: Vacation Mode
                secondary: '{{ states(config.entity)|title }}'
                tap_action:
                  action: toggle
                hold_action:
                  action: none
                icon_color: '{{ "var(--rgb-info)" if( states(config.entity)=="on" ) }}'
                entity: input_boolean.vacation_mode
                card_mod:
                  style: |
                    ha-card {
                      border-radius: 14px
                    }
          - type: vertical-stack
            cards:
              - type: custom:auto-entities
                card:
                  type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: repeat(3, 33.333%)
                    grid-template-rows: auto
                    grid-gap: 0
                    mediaquery:
                      '(max-width: 600px)':
                        grid-template-columns: 100%
                card_param: cards
                filter:
                  include:
                    - group: light.controllable_lights_on_off
                      options:
                        type: custom:mushroom-light-card
                        card_mod:
                          style: |
                            ha-card {
                              border-radius: 14px
                            }
                    - entity_id: switch.monoprice_1
                      options:
                        type: custom:mushroom-light-card
                        card_mod:
                          style: |
                            ha-card {
                              border-radius: 14px
                            }
                  exclude: []
                show_empty: true
              - type: custom:auto-entities
                card:
                  type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: repeat(3,33.333%)
                    grid-template-rows: auto
                    grid-gap: 0
                    mediaquery:
                      '(max-width: 600px)':
                        grid-template-columns: 100%
                card_param: cards
                filter:
                  include:
                    - group: light.controllable_lights_dimmable
                      options:
                        type: custom:mushroom-template-card
                        badge_icon: mdi:cog
                        icon: mdi:lightbulb
                        icon_color: '{{ "var(--rgb-orange)" if( states(entity) == "on" ) }}'
                        primary: '{{state_attr(entity,"friendly_name")}}'
                        secondary: '{{states(entity)|title}}'
                        hold_action:
                          action: more-info
                        card_mod:
                          style: |
                            ha-card {
                              border-radius: 14px
                            }
                  exclude:
                    - entity_id: light.den_light_1
                show_empty: true
              - type: conditional
                conditions:
                  - entity: automation.living_room_christmas_tree_timer
                    state: 'on'
                card:
                  type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 50% 50%
                    grid-template-rows: auto
                  mediaquery:
                    '(max-width: 600px)':
                      grid-template-columns: 100%
                  cards:
                    - type: custom:time-picker-card
                      entity: input_datetime.time_christmas_tree_on
                      hour_mode: 12
                      layout:
                        name: header
                        align_controls: center
                        thin: true
                        embedded: false
                      hide:
                        icon: true
                        seconds: true
                      name: 'Tree On At:'
                      minute_step: 15
                      card_mod:
                        style: |
                          ha-card {
                            --tpc-elements-background-color: orange !important;
                            --tpc-text-color: black !important;
                            --tpc-accent-color: orange !important;
                            border-radius: 14px
                          }
                    - type: custom:time-picker-card
                      entity: input_datetime.time_christmas_tree_off
                      hour_mode: 12
                      layout:
                        name: header
                        align_controls: center
                        thin: true
                        embedded: false
                      hide:
                        icon: true
                        seconds: true
                      name: 'Tree Off At:'
                      minute_step: 15
                      card_mod:
                        style: |
                          ha-card {
                            --tpc-elements-background-color: orange !important;
                            --tpc-text-color: black !important;
                            --tpc-accent-color: orange !important;
                            border-radius: 14px
                          }
              - type: conditional
                conditions:
                  - condition: state
                    entity: automation.christmas_lights_timer
                    state: 'on'
                card:
                  type: custom:layout-card
                  layout_type: custom:grid-layout
                  layout:
                    grid-template-columns: 50% 50%
                    grid-template-rows: auto
                  mediaquery:
                    '(max-width: 600px)':
                      grid-template-columns: 100%
                  cards:
                    - type: custom:time-picker-card
                      hour_mode: 12
                      layout:
                        name: header
                        align_controls: center
                        thin: true
                        embedded: false
                      hide:
                        icon: true
                        seconds: true
                      name: 'Griswold Lights On At:'
                      minute_step: 15
                      entity: input_datetime.christmas_lights_on
                      card_mod:
                        style: |
                          ha-card {
                            --tpc-elements-background-color: orange !important;
                            --tpc-text-color: black !important;
                            --tpc-accent-color: orange !important;
                            border-radius: 14px
                          }
                    - type: custom:time-picker-card
                      hour_mode: 12
                      layout:
                        name: header
                        align_controls: center
                        thin: true
                        embedded: false
                      hide:
                        icon: true
                        seconds: true
                      minute_step: 15
                      entity: input_datetime.christmas_lights_off
                      name: 'Griswold Lights Off At:'
                      card_mod:
                        style: |
                          ha-card {
                            --tpc-elements-background-color: orange !important;
                            --tpc-text-color: black !important;
                            --tpc-accent-color: orange !important;
                            border-radius: 14px
                          }
            view_layout:
              grid-area: main
    theme: Fluent Orange
  - title: Climate
    path: climate
    icon: ''
    visible:
      - user: 1adcbfbd5637444bacb8239bc794bb4a
      - user: 03dd7450aa7f4d0e8df8ed730df485b1
      - user: 25121d6fff8247f5b3c8b55198ff4705
    type: panel
    cards:
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: 35% auto
          grid-template-rows: auto
          grid-template-areas: |
            "sidebar main"
          grid-gap: 0
          mediaquery:
            '(max-width: 600px)':
              grid-template-columns: 100%
              grid-template-areas: |
                "sidebar"
                "main"
        cards:
          - type: vertical-stack
            cards:
              - type: custom:mushroom-title-card
                title: Thermostat Controls
                card_mod:
                  style: |
                    ha-card {
                      --title-font-size: 2rem;
                      --title-font-weight: bold;
                    }
              - type: horizontal-stack
                cards:
                  - type: custom:mushroom-template-card
                    primary: Current Status
                    secondary: >
                      {% if( states(entity) == "heat" ) %} Heat On {% else %} {{
                      states("climate.ecobee3")|title }} {% endif %}
                    icon: >
                      {% if( states(entity) == "heat" ) %} mdi:fire {% else %}
                      mdi:fire-off {% endif %}
                    icon_color: >
                      {% if( states(entity) == "heat" ) %} var(--rgb-red) {%
                      endif %}
                    entity: climate.ecobee3
                    tap_action:
                      action: none
                    badge_icon: |-
                      {% if( state_attr(entity, "hvac_action") !== "idle" ) %} 
                      mdi:fan
                      {% endif %}
                    card_mod:
                      style: |
                        ha-card {
                          --ha-card-background: transparent;
                          --card-secondary-font-size: 1.25rem;
                        }
                  - type: custom:mushroom-chips-card
                    chips:
                      - type: conditional
                        conditions:
                          - condition: state
                            entity: climate.ecobee3
                            state: heat
                        chip:
                          type: template
                          icon: mdi:fan
                          icon_color: |-
                            {% if(states(config.entity) == 'on') %}
                            red
                            {% else %}
                            var(--rgb-disabled)
                            {% endif %}
                          entity: binary_sensor.furnace_running
                          content: >-
                            {% if(states(config.entity) == 'on') %} Running {%
                            else %} Idle {% endif %}
              - type: custom:mushroom-template-card
                primary: Current Temp
                secondary: '{{ state_attr(entity,"current_temperature")|round(0) }}°'
                icon: mdi:thermometer
                entity: climate.ecobee3
                tap_action:
                  action: none
                card_mod:
                  style: |
                    ha-card {
                      --ha-card-background: transparent;
                      --card-secondary-font-size: 1.25rem;
                    }
              - type: conditional
                conditions:
                  - condition: state
                    entity: climate.ecobee3
                    state: heat
                card:
                  type: custom:mushroom-template-card
                  primary: Target
                  secondary: '{{ state_attr(entity,"temperature")|round(0) }}°'
                  icon: mdi:target
                  entity: climate.ecobee3
                  tap_action:
                    action: none
                  card_mod:
                    style: |
                      ha-card {
                        --ha-card-background: transparent;
                        --card-secondary-font-size: 1.25rem;
                      }
            view_layout:
              grid-area: sidebar
          - type: vertical-stack
            cards:
              - type: conditional
                conditions:
                  - condition: state
                    entity: climate.ecobee3
                    state: 'off'
                card:
                  type: custom:mushroom-template-card
                  primary: Thermostat
                  secondary: Turn On
                  icon: mdi:power
                  entity: climate.ecobee3
                  icon_color: var(--rgb-blue)
                  tap_action:
                    action: call-service
                    service: climate.set_hvac_mode
                    target:
                      device_id: 3a4702e5f54b52ded08ab1b7002dcab0
                    data:
                      hvac_mode: heat
                  card_mod:
                    style: |
                      ha-card {
                        --card-secondary-font-size: 1.25rem;
                      }
              - type: conditional
                conditions:
                  - condition: state
                    entity: climate.ecobee3
                    state: heat
                card:
                  type: vertical-stack
                  cards:
                    - type: custom:mushroom-template-card
                      primary: Thermostat
                      secondary: Turn Off
                      icon: mdi:power
                      entity: climate.ecobee3
                      icon_color: var(--rgb-red)
                      tap_action:
                        action: call-service
                        service: climate.set_hvac_mode
                        target:
                          device_id: 3a4702e5f54b52ded08ab1b7002dcab0
                        data:
                          hvac_mode: 'off'
                      card_mod:
                        style: |
                          ha-card {
                            --card-secondary-font-size: 1.25rem;
                          }
                    - type: custom:mushroom-climate-card
                      entity: climate.ecobee3
                      show_temperature_control: true
                      secondary_info: none
                      fill_container: false
                      primary_info: name
                      icon: 'null'
                      icon_type: none
                      name: 'Set Temperature To:'
                      tap_action:
                        action: none
                      hold_action:
                        action: none
                    - type: custom:mushroom-chips-card
                      card_mod:
                        style: |
                          ha-card {
                            --chip-box-shadow: none;
                            --chip-background: none;
                          }
                      chips:
                        - type: template
                          tap_action:
                            action: none
                          entity: climate.ecobee3
                          content: 'Current Mode:'
                        - type: template
                          tap_action:
                            action: none
                          entity: climate.ecobee3
                          icon: mdi:home
                          icon_color: >
                            {% if( is_state_attr(config.entity, 'climate_mode',
                            'Home') ) %}
                              var(--rgb-blue)
                            {% else %}
                              var(--rgb-disabled)
                            {% endif %}
                          content: Home
                        - type: template
                          tap_action:
                            action: none
                          entity: climate.ecobee3
                          icon: mdi:home-export-outline
                          icon_color: >
                            {% if( is_state_attr(config.entity, 'climate_mode',
                            'Away') ) %}
                              var(--rgb-blue)
                            {% else %}
                              var(--rgb-disabled)
                            {% endif %}
                          content: Away
                        - type: template
                          tap_action:
                            action: none
                          entity: climate.ecobee3
                          icon: mdi:sleep
                          icon_color: >
                            {% if( is_state_attr(config.entity, 'climate_mode',
                            'Sleep') ) %}
                              var(--rgb-blue)
                            {% else %}
                              var(--rgb-disabled)
                            {% endif %}
                          content: Sleep
                        - type: template
                          tap_action:
                            action: none
                          entity: climate.ecobee3
                          icon: mdi:beach
                          icon_color: >
                            {% if( is_state_attr(config.entity, 'climate_mode',
                            'Vacation') ) %}
                              var(--rgb-blue)
                            {% else %}
                              var(--rgb-disabled)
                            {% endif %}
                          content: Vacation
            view_layout:
              grid-area: main
    theme: Fluent Orange
  - path: monthly-data
    title: Monthly Data
    subview: true
    type: panel
    cards:
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: 25% 75%
          grid-template-rows: auto
          grid-template-areas: |
            "sidebar main"
          grid-gap: 0
          mediaquery:
            '(max-width: 600px)':
              grid-template-columns: 100%
              grid-template-areas: |
                "sidebar"
                "main"
        cards:
          - type: vertical-stack
            cards:
              - type: custom:mushroom-template-card
                entity: null
                primary: Monthly Data Cap
                secondary: 1200 GB
                icon: mdi:information
                tap_action:
                  action: none
                hold_action:
                  action: none
                card_mod:
                  style: |
                    ha-card {
                      --ha-card-background: transparent;
                    }
              - type: custom:mushroom-template-card
                entity: sensor.data_usage_gb
                secondary: used this month
                primary: >-
                  {{states(config.entity)|round(1)}} {{
                  state_attr(config.entity, 'unit_of_measurement') }}
                icon: mdi:cloud
                icon_color: var(--rgb-info-color)
                tap_action:
                  action: none
                hold_action:
                  action: none
                card_mod:
                  style: |
                    ha-card {
                      --ha-card-background: transparent;
                      --card-primary-font-size: 2rem;
                      --card-primary-line-height: 1;
                    }
              - type: custom:stack-in-card
                mode: vertical
                card_mod:
                  style: |
                    ha-card {
                      --ha-card-background: transparent;
                    }
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.data_usage_gb
                    primary: '{{ state_attr(config.entity,"pct_of_cap")|round(1) }}%'
                    secondary: of available data used
                    icon: mdi:percent
                    icon_color: var(--rgb-info-color)
                    tap_action:
                      action: none
                    hold_action:
                      action: none
                    card_mod:
                      style: |
                        ha-card {
                          --ha-card-background: transparent;
                          --card-primary-font-size: 2rem;
                          --card-primary-line-height: 1;
                        }
                  - type: custom:bar-card
                    height: 12px
                    color: var(--info-color)
                    entities:
                      - entity: sensor.data_usage_gb
                        attribute: pct_of_cap
                        name: Data Usage
                    positions:
                      icon: 'off'
                      indicator: 'off'
                      name: 'off'
                      value: 'off'
              - type: custom:stack-in-card
                mode: vertical
                card_mod:
                  style: |
                    ha-card {
                      --ha-card-background: transparent;
                    }
                cards:
                  - type: custom:mushroom-template-card
                    entity: sensor.month_gone
                    primary: '{{ states(config.entity)|round(1) }}%'
                    secondary: into the month
                    name: Into this month
                    icon: mdi:calendar-arrow-right
                    icon_color: white
                    card_mod:
                      style: |
                        ha-card {
                          --ha-card-background: transparent;
                          --card-primary-font-size: 2rem;
                          --card-primary-line-height: 1;
                        }
                  - type: custom:bar-card
                    height: 12px
                    color: white
                    entities:
                      - entity: sensor.month_gone
                        name: Month
                    positions:
                      icon: 'off'
                      indicator: 'off'
                      name: 'off'
                      value: 'off'
            view_layout:
              grid-area: sidebar
          - type: vertical-stack
            view_layout:
              grid-area: main
            cards:
              - type: custom:layout-card
                layout_type: custom:grid-layout
                layout:
                  grid-template-columns: 50% 50%
                  mediaquery:
                    '(max-width: 600px)':
                      grid-template-columns: 100%
                cards:
                  - type: custom:apexcharts-card
                    header:
                      show: true
                      title: Hourly Data Usage
                    yaxis:
                      - id: delta
                        decimals: 1
                        opposite: true
                        min: 0
                      - id: day
                        show: false
                        min: 0
                        max: 1
                        decimals: 0
                        apex_config:
                          tickAmount: 1
                          labels:
                            formatter: |
                              EVAL:function(value) {
                                if (value == 1) return "ON";
                                return "OFF";
                              }
                    series:
                      - entity: sensor.data_usage_per_hour
                        name: Per Hour
                        extend_to: now
                        type: column
                        color: var(--info-color)
                        yaxis_id: delta
                        show:
                          legend_value: false
                        group_by:
                          duration: 1h
                      - entity: input_boolean.day_cycle
                        transform: 'return x == "on" ? 1 : 0;'
                        color: '#666'
                        group_by:
                          duration: 1d
                        opacity: 0.5
                        stroke_width: 0
                        name: Day
                        type: area
                        show:
                          legend_value: false
                          in_header: false
                        fill_raw: last
                        curve: stepline
                        yaxis_id: day
                    graph_span: 5d
                    apex_config:
                      chart:
                        height: 250px
                  - type: custom:apexcharts-card
                    header:
                      show: true
                      title: vs Time of Month
                    yaxis:
                      - id: delta
                        decimals: 1
                        opposite: true
                      - id: day
                        show: false
                        min: 0
                        max: 1
                        decimals: 0
                        apex_config:
                          tickAmount: 1
                          labels:
                            formatter: |
                              EVAL:function(value) {
                                if (value == 1) return "ON";
                                return "OFF";
                              }
                    series:
                      - entity: input_boolean.day_cycle
                        transform: 'return x == "on" ? 1 : 0;'
                        color: '#666'
                        group_by:
                          duration: 1d
                        opacity: 0.5
                        stroke_width: 0
                        name: Day
                        type: area
                        show:
                          legend_value: false
                          in_header: false
                        fill_raw: last
                        curve: stepline
                        yaxis_id: day
                      - entity: sensor.data_usage_gb
                        attribute: pct_of_cap
                        unit: '%'
                        name: '% of Cap'
                        extend_to: now
                        type: line
                        color: var(--info-color)
                        yaxis_id: delta
                        group_by:
                          duration: 4hr
                      - entity: sensor.month_gone
                        name: '% of Month'
                        extend_to: now
                        curve: smooth
                        type: line
                        stroke_width: 2
                        color: white
                        yaxis_id: delta
                        group_by:
                          duration: 12hr
                    graph_span: 5d
                    apex_config:
                      chart:
                        height: 250px
    theme: Fluent Orange
  - path: batteries
    icon: hass:battery-charging-70
    visible:
      - user: 1adcbfbd5637444bacb8239bc794bb4a
    type: custom:horizontal-layout
    cards:
      - type: custom:auto-entities
        card:
          type: entities
          title: Low Batteries
          show_header_toggle: false
        filter:
          include:
            - entity_id: sensor.*battery*
          exclude:
            - entity_id: '*iphone*'
            - entity_id: sensor.space_between*
            - entity_id: sensor.abhorred*
            - entity_id: sensor.neatfreak*
            - state: unavailable
            - state: '> 70'
        show_empty: false
      - type: custom:auto-entities
        card:
          type: entities
          title: Unavailable Sensors
          show_header_toggle: false
          state_color: true
        filter:
          include:
            - state: unavailable
          exclude:
            - domain: camera
            - domain: vacuum
            - domain: media_player
            - domain: device_tracker
            - entity_id: '*speedtest*'
            - entity_id: '*plex*'
            - entity_id: '*_identifybutton'
        show_empty: true
        sort:
          method: friendly_name
      - type: custom:auto-entities
        card:
          type: entities
          state_color: true
          show_header_toggle: false
          title: Windows
        filter:
          include:
            - domain: binary_sensor
              entity_id: '*window*'
            - domain: group
              entity_id: '*window*'
          exclude: []
        sort:
          method: friendly_name
  - visible:
      - user: 1adcbfbd5637444bacb8239bc794bb4a
    title: Lights (Admin)
    path: lights-admin
    type: panel
    cards:
      - type: custom:layout-card
        layout_type: custom:grid-layout
        layout:
          grid-template-columns: 40% auto
          grid-template-rows: auto
          grid-template-areas: |
            "icon info"
            "icon bar"
          grid-gap: 0
        cards:
          - type: custom:mushroom-template-card
            entity: sensor.monthly_data_concern
            icon: >-
              {{ iif(states(config.entity) == "on", "mdi:alert", "mdi:download")
              }}
            icon_color: '{{ var(--rgb-warning-color) if(states(config.entity) == "on") }}'
            primary: null
            view_layout:
              grid-area: icon
          - type: custom:mushroom-template-card
            entity: sensor.data_usage_gb
            primary: Monthly Data Cap
            icon: null
            view_layout:
              grid-area: info
          - type: custom:bar-card
            tap_action:
              action: none
            hold_action:
              action: none
            card_mod:
              style: |
                ha-card > div {
                  padding: .5rem 0 0 0;
                }
            height: 4px
            color: orange
            entities:
              - entity: sensor.data_usage_gb
                attribute: pct_of_cap
                name: Data Usage
              - entity: sensor.month_gone
                name: Month
                color: grey
                height: 2px
            positions:
              icon: 'off'
              indicator: 'off'
              name: 'off'
              value: 'off'
            view_layout:
              grid-area: bar
